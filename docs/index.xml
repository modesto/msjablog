<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Blog de Modesto San Juan</title>
    <link>http://www.modestosanjuan.com/index.xml</link>
    <description>Recent content on Blog de Modesto San Juan</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>es-es</language>
    <lastBuildDate>Sat, 17 Dec 2016 15:34:32 +0100</lastBuildDate>
    <atom:link href="http://www.modestosanjuan.com/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Arquitectura de software como habilidad</title>
      <link>http://www.modestosanjuan.com/post/arquitectura-de-software-como-habilidad/</link>
      <pubDate>Sat, 17 Dec 2016 15:34:32 +0100</pubDate>
      
      <guid>http://www.modestosanjuan.com/post/arquitectura-de-software-como-habilidad/</guid>
      <description>

&lt;h2 id=&#34;el-p칤caro-en-ad-d-2춹-edici칩n&#34;&gt;El p칤caro en AD&amp;amp;D 2춹 edici칩n&lt;/h2&gt;

&lt;p&gt;Advanced Dungeons &amp;amp; Dragons 2춹 edici칩n ten칤a un sistema de reglas bastante restrictivo que puede ser resumido con un ejemplo bastante sencillo: el p칤caro era el 칰nico tipo de personaje que ten칤a permitido intentar esconderse entre la sombras o moverse sigilosamente.&lt;/p&gt;

&lt;p&gt;Si, es as칤 de f치cil. Si no eras un p칤caro, esas dos habilidades estaban fuera de tu alcance.&lt;/p&gt;

&lt;p&gt;En su disculpa he de decir que AD&amp;amp;D 2춹ed. es del a침o 1989 y las reglas originales son del 74. Algunos a침os despu칠s, este desprop칩sito se corrig칤o porque no ten칤a ning칰n sentido.&lt;/p&gt;

&lt;p&gt;Y es que resulta mucho m치s interesante jugar bajo un sistema de reglas en el que cualquier jugador puede intentar moverse sigilosamente, dependiendo esta acci칩n de su nivel de habilidad y de su contexto. Evidentemente, no es lo mismo intentarlo si llevas una armadura de placas met치lica que si vas desnudo con calcetines de felpa.&lt;/p&gt;

&lt;h2 id=&#34;el-arquitecto-de-software&#34;&gt;El arquitecto de software&lt;/h2&gt;

&lt;p&gt;A d칤a de hoy, a las puertas del a침o 2017, muchas empresas se empe침an en establecer sistemas de reglas que rigen el funcionamiento de sus equipos de desarrollo como si de partidas de AD&amp;amp;D 2춹ed. se tratase.&lt;/p&gt;

&lt;p&gt;Me refiero especialmente a esos equipos en los que existe una figura de &amp;ldquo;arquitecto&amp;rdquo; que, en la l칤nea del p칤caro, es el 칰nico que tiene permitido desempe침ar tareas relacionadas con la arquitectura del software.&lt;/p&gt;

&lt;h2 id=&#34;la-arquitectura-como-habilidad&#34;&gt;La arquitectura como habilidad&lt;/h2&gt;

&lt;p&gt;Estoy totalmente convencido de que la arquitectura de software deber칤a tratarse como una habilidad en lugar de como un rol.&lt;/p&gt;

&lt;p&gt;Como toda habilidad, es posible aprenderla, cultivarla y ponerla en pr치ctica sea cual sea nuestro nivel en ella. Por supuesto, dependiendo de nuestro nivel, los resultados podr치n ser desde desastrosos ha plenamente satisfactorios, como pasa con la pr치ctica de cualquier otra habilidad.&lt;/p&gt;

&lt;p&gt;Enfocar la arquitectura de software como una habilidad en lugar de como un rol tiene muchas ventajas, tanto para el proyecto como para los integrantes del equipo.&lt;/p&gt;

&lt;h3 id=&#34;propiedad-colectiva-del-c칩digo&#34;&gt;Propiedad colectiva del c칩digo&lt;/h3&gt;

&lt;p&gt;Extreme Programming nos habla de la &lt;a href=&#34;http://www.extremeprogramming.org/rules/collective.html&#34;&gt;propiedad colectiva del c칩digo&lt;/a&gt; como una forma de alentar a todos los miembros del equipo a participar en cualquier parte del c칩digo, sin limitarse a aquellas partes que ellos han desarrollado.&lt;/p&gt;

&lt;p&gt;Nos invita a cuestionar el dise침o, la arquitectura, a modificar cualquier parte del c칩digo, siempre con responsabilidad, por supuesto.&lt;/p&gt;

&lt;p&gt;Las ventajas son m칰ltiples y los beneficios compensan con creces:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Elimina cuellos de botella.- Dejar la arquitectura en manos de una 칰nica persona no escala y adem치s es mal칤simo para el bus factor.&lt;/li&gt;
&lt;li&gt;Reduce silos de conocimiento.&lt;/li&gt;
&lt;li&gt;Ayuda a crear equipo.- Cuando un equipo se construye a base de un sistema de castas, dificulta tener sensaci칩n de pertenencia.&lt;/li&gt;
&lt;li&gt;Promueve el incremento de la calidad del software. Evidentemente no lo garantiza, pero es que no hay NADA que lo garantice.&lt;/li&gt;
&lt;li&gt;Facilita que suba el nivel del equipo.- Promover la propiedad colectiva del c칩digo hace que aquellos que tienen su &amp;ldquo;skill&amp;rdquo; m치s baja, tiendan a subirla si realmente tienen inter칠s.&lt;/li&gt;
&lt;li&gt;Mejora el crecimiento del equipo.- Cuando el negocio necesite que el equipo crezca, nada como que la mayor칤a del equipo tenga un conocimiento amplio del software. Situaciones del tipo &amp;ldquo;esto lo tenemods que ver con el arquitecto&amp;rdquo; desaparecen por completo. Esto est치 totalmente relacionado con la existencia de silos de conocimiento.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;solucionando-un-problema-que-no-es-de-software&#34;&gt;Solucionando un problema que no es de software&lt;/h2&gt;

&lt;p&gt;Muchas veces se dan casos como estos:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Soy arquitecto porque as칤 gano mas dinero.- En este caso estamos hablando de solucionar un problema econ칩mico del 치mbito personal, no del software. Esto es algo t칤pico en grandes corps en las que el crecimiento econ칩mico est치 vinculado a una tabla de roles cl치sica. Como an칠cdota curiosa, hace muchos a침os fu칤 contratado como director de arte por una raz칩n similar. A칰n as칤, que te te denominen &amp;ldquo;arquitecto&amp;rdquo; no implica que debas ejercer de dictador de la arquitectura, se pueden seguir aplicando los criterios de la propiedad colectiva del c칩digo.&lt;/li&gt;
&lt;li&gt;El cliente demanda esa figura.- Una posible respuesta ser칤a: &amp;ldquo;pues no trabajes con ese cliente&amp;rdquo;. Evidentemente es una respuesta v치lida, pero no siempre es realista. En esos casos nada te impide hacer lo mismo que en el punto anterior, es simplemente una fachada de cara a trabajar con un cliente.&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;El equipo est치 muy verde.- El problema ha sido montar un equipo mal balanceado. Puede que esta sea una buena soluci칩n a corto plazo, pero un equipo no puede estar verde para siempre, se deber칤a hacer un ejercicio proactivo en balancear el equipo y buscar su madurez.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Los dos primeros puntos tienen mucho que ver con una cuesti칩n de &amp;ldquo;hacking cultural&amp;rdquo;. Para mi es vital regular bien la cantidad de energ칤a empleada para realizar estas acciones de hacking. En ocasiones puede merecer la pena cambiar de cliente/trabajo y dedicar esa energ칤a a activades m치s provechosas.&lt;/p&gt;

&lt;h2 id=&#34;una-cuesti칩n-cultural&#34;&gt;Una cuesti칩n cultural&lt;/h2&gt;

&lt;p&gt;쯈uiero decir con esto que todo el mundo deber칤a hacer de todo y saber de todo?&lt;/p&gt;

&lt;p&gt;No necesariamente. Todo equipo est치 compuesto por personas cuyas habilidades est치n a diferentes niveles. Puede que unos sean m치s fuertes en un punto que otros, es normal. Pero tambi칠n es normal que emerjan figuras de liderazgo de facto, algo muy diferente a la figura del arquitecto que ya he mencionado.&lt;/p&gt;

&lt;p&gt;Un problema habitual es que, en el momento en el que responsabilizas a una persona de un aspecto del desarrollo, autom치ticamente el resto de los miembros del equipo pasan a tener una actitud totalmente pasiva respecto a ese aspecto.&lt;/p&gt;

&lt;h2 id=&#34;no-es-f치cil&#34;&gt;No es f치cil&lt;/h2&gt;

&lt;p&gt;Por supuesto, hay mil casos y situaciones que pueden llevar a que tener una figura de este tipo sea una buena idea, no lo niego. Pero creo que todos ellos son siempre casos coyunturales con fecha de caducidad que deber칤an tender a evolucionar en forma de un equipo s칩lido, maduro y equilibrado.&lt;/p&gt;

&lt;p&gt;Est치 claro que no es f치cil tener un equipo equilibrado, en el que la mayor칤a de sus integrantes no s칩lo se preocupen de la arquitectura, sino que adem치s tengan la capacidad de hacerlo. 쯇ero qui칠n ha dicho que sea f치cil? Hacer software que perdure en el tiempo, que se mantenga estable y con un nivel de mantenilibilidad adecuado no es f치cil.&lt;/p&gt;

&lt;p&gt;Si el enfoque de tu empresa es tener una m치quina de hacer churros en la que se contrata programadores a kilo, tal vez la idea de tener arquitectos que sobrevuelan por los proyectos tallando la arquitectura sobre tablas de piedra resulte lo m치s normal. Pero es que esto nos lleva al punto anterior, adoptar una soluci칩n para un problema que no deber칤a existir.&lt;/p&gt;

&lt;p&gt;** La imagen de la cabecera es de &lt;a href=&#34;http://svetlaya777.deviantart.com/&#34;&gt;Svetlana Vorobyeva&lt;/a&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>La regla del boy scout</title>
      <link>http://www.modestosanjuan.com/la-regla-del-boy-scout/</link>
      <pubDate>Thu, 10 Nov 2016 10:01:15 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/la-regla-del-boy-scout/</guid>
      <description>

&lt;p&gt;Hay discipinas en las que dicen que a largo plazo es m치s importante la constancia que el talento. Creo que en el desarrollo de software맚ener constancia es una virtud.&lt;/p&gt;

&lt;p&gt;Conforme va avanzando un proyecto, es normal que el dise침o sufra cambios (preferiblemente peque침os) y a la vez el c칩digo puede sufrir altibajos de calidad.&lt;/p&gt;

&lt;p&gt;Tener un conocimiento escaso del problema, equivocarnos al enfocar la soluci칩n y muchos otros factores pueden llevarnos a una circunstancia muy habitual:만stamos enfocando una historia de usuario y pasamos por una parte de nuestro c칩digo que no se entiende bien, est치 mal enfocada, es complicada de extender, en general, nos est치 impidiendo avanzar de forma fluida hacia nuestro objetivo, entregar valor.&lt;/p&gt;

&lt;h2 id=&#34;patad칩n-palante&#34;&gt;Patad칩n palante&lt;/h2&gt;

&lt;p&gt;Un intento de soluci칩n que he visto con frecuencia es el del &amp;#8220;patad칩n palante&amp;#8221; haciendo una 침apa para sacar la historia lo antes posible y luego, cada cierto tiempo, se mete una historia t칠cnia en el sprint para eliminar deuda t칠cnica y listo.Ron Jeffries describe muy bien este problema en&lt;a href=&#34;http://ronjeffries.com/xprog/articles/refactoring-not-on-the-backlog/&#34;&gt;Refactoring not on the backlog&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;No voy a negar que hay veces que es una soluci칩n perfectamente v치lida en circunstancias en las que es realmente importante cumplir con un plazo. El problema lo veo cuando se convierte en pr치ctica habitual. Si tu proyecto requiere constantemente recurrir al &amp;#8220;patad칩n palante&amp;#8221;, tal vez deber칤as replantearte las fechas, el alcance y/o la forma en la que est치s enfocando el desarrollo de tu software.&lt;/p&gt;

&lt;h2 id=&#34;la-regla-del-boy-scout&#34;&gt;La regla del boy scout&lt;/h2&gt;

&lt;p&gt;Otra opci칩n es asegurarnos de que en cada historia de usuario que entregamos y en cada incidencia que resolvemos, el c칩digo est치 mejor de como lo encontramos. Uncle Bob맓o llama aplicar la &amp;#8220;regla del boy scout&amp;#8221;, Fowler lo llama &lt;a href=&#34;http://martinfowler.com/bliki/OpportunisticRefactoring.html&#34;&gt;refactor oportunista&lt;/a&gt;, pero en esencia vienen a decir lo mismo.&lt;/p&gt;

&lt;p&gt;Una de las많randes ventajas de aplicar esta regla es que맙e dedican m치s cuiadados a las zonas que m치s se tocan, lo que nos ayuda a no terminar teniendo una &lt;a href=&#34;https://blog.codinghorror.com/the-big-ball-of-mud-and-other-architectural-disasters/&#34;&gt;big ball of mud&lt;/a&gt; y terminar con un desastre말nmantenible.&lt;/p&gt;

&lt;p&gt;Alguno podr치 pensar &amp;#8220;pero entonces맚e est치s dejando partes de tu software sin &amp;#8216;limpiar&amp;rsquo;&amp;#8221;. En efecto, pero son partes que no est치n dando problemas (no tienen incidencias) y que no estamos necesitando tocar (no hay HU), as칤 que, por el momento, 춰no hay necesidad de dedicarles ni un minuto!&lt;/p&gt;

&lt;h2 id=&#34;poco-a-poco&#34;&gt;Poco a poco&lt;/h2&gt;

&lt;p&gt;Da igual el estado en el que se encuentre nuestro software, si de manera constante맚erminamos nuestra jornada y est치 un poco mejor que cuando la empezamos, a largo plazo veremos que맕uestro flujo de entrega de valor es much칤simo mejor que antes.&lt;/p&gt;

&lt;p&gt;No es necesario tardar tres veces m치s en hacer una historia de usuario porque nos embarcamos en un refactor de dimensiones monstruosas, con que est칠 un poco mejor es suficiente.&lt;/p&gt;

&lt;h2 id=&#34;la-excusa-del-tiempo&#34;&gt;La excusa del tiempo&lt;/h2&gt;

&lt;p&gt;Habitualmente escucho la excusa de &amp;#8220;es que no tenemos tiempo para eso, tenemos que entregar las historias de usuario lo antes posible&amp;#8221;. Esa afirmaci칩n es un arma de doble filo porque si no prestamos a nuestro c칩digo la atenci칩n necesaria, el tiempo que tardaremos en terminar las historias de usuario ser치 cada vez mayor y만s muy probable que el n칰mero de incidencias se incremente.&lt;/p&gt;

&lt;h2 id=&#34;mantenernos-en-una-soluci칩n-simple&#34;&gt;Mantenernos en una soluci칩n simple&lt;/h2&gt;

&lt;p&gt;Recurrir a arquitecturas y dise침os demasiado complejos tiende a crear software r칤gido que pierde capacidad de maniobra de cara al futuro. No olvidemos de que es precisamente en el futuro cuando tendremos m치s conocimiento del problema y, por lo tanto, estaremos m치s cualificados para ofrecer mejores soluciones. Anclarnos a arquitectures encorsetadas desde el principio puede dar una sensaci칩n muy &amp;#8220;enterprise&amp;#8221;, pero se convierte en un problema en el futuro.&lt;/p&gt;

&lt;p&gt;En esta l칤nea recomiendo leer &lt;a href=&#34;https://leanpub.com/4rulesofsimpledesign&#34;&gt;Understanding the Four Rules of Simple Design&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&#34;el-coste-de-deshacer&#34;&gt;El coste de deshacer&lt;/h2&gt;

&lt;p&gt;A menudo tenemos en cuenta 칰nicamente el coste de hacer, pero es muy importante tener en cuenta tambi칠n el coste de deshacer.&lt;/p&gt;

&lt;p&gt;Recurrir a c칩digo de terceros no es malo, puede ahorrarnos much칤simas horas de trabajo en aspectos que posiblemente no tengan nada que ver con nuestro negocio. Pero al hacerlo debemos escoger muy bien la forma en la que lo hacemos.&lt;/p&gt;

&lt;p&gt;Esta es una de las razones por las que se suele hablar de la preferencia de usar librer칤as vs frameworks. El coste de deshacer cuando hablamos de una librer칤a puede ser relativamente bajo si adem치s hemos creado las abstracciones necesarias. Cuando escogemos acoplarnos a unFramework,만l coste de deshacer es m치s alto.&lt;/p&gt;

&lt;p&gt;Por supuesto, es una cuesti칩n de equilibrio y hay muchas veces en las que el coste a pagar por utilizar un framework merece completamente la pena.&lt;/p&gt;

&lt;p&gt;Aunque no habla ex치ctamente de este tema, me gusta mucho el v칤deo &lt;a href=&#34;https://www.infoq.com/presentations/8-lines-code-refactoring&#34;&gt;&amp;#8220;8 Lines of Code&amp;#8221;&lt;/a&gt;맋e Greg Young, en el que habla del coste de atarnos a soluciones m치gicas.&lt;/p&gt;

&lt;h2 id=&#34;conclusi칩n&#34;&gt;Conclusi칩n&lt;/h2&gt;

&lt;p&gt;Debemos intentar que nuestro c칩digo sea siempre un poquito mejor. La 칰nica forma de hacer que nuestro c칩digo sea mejor es mejorar nosotros. Si identificamos que tomamos malas decisiones con demasiada frecuencia, tenemos que deshacer mucho de lo que hacemos, no somos capaces de마lcanzar un flujo de entrega adecuado, tal vez tengamos que plantearnos invertir un poco de tiempo en mejorar. Existen multitud de recursos que nos pueden ayudar a desarrollar mejor, tenemos las comunidades y los eventos de comunidad, cursos online y presenciales, blogs de un nivel bestial&amp;#8230; lo que no tenemos es excusa.&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;p&gt;##&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Desarrollador, pon contenedores en tu vida</title>
      <link>http://www.modestosanjuan.com/desarrollador-pon-contenedores-en-tu-vida/</link>
      <pubDate>Sun, 06 Nov 2016 23:10:11 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/desarrollador-pon-contenedores-en-tu-vida/</guid>
      <description>&lt;p&gt;No, en este post no te voy a vender las virtudes de desplegar su aplicaci칩n sobre docker. Mucho se ha escrito sobre el tema y mucho se seguir치 escribiendo. Tambi칠n se ha escrito de &lt;a href=&#34;https://thehftguy.wordpress.com/2016/11/01/docker-in-production-an-history-of-failure/&#34;&gt;lo malo que es&lt;/a&gt; docker y de lo &lt;a href=&#34;http://patrobinson.github.io/2016/11/05/docker-in-production/&#34;&gt;no tan malo que es&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Este post est치 destinado especialmente a todos aquellos desarrolladores que no despleg치is vuestras aplicaciones con Docker. Porque los que ya us치is docker en el ciclo de entrega ya sab칠is lo que voy a contar y adem치s os parece obvio.&lt;/p&gt;

&lt;p&gt;Seguro que alguna vez has tenido que instalarte Redis, Mongo, Couchbase, MySql, ElasticSearch, RabbitMq o cualquier otro software맙imilar para hacer una prueba puntual, por requisitos de un proyecto fugaz o para hacer un spike y decidir si finalmente말ntroduces esa pieza o no en tu infraestructura.&lt;/p&gt;

&lt;p&gt;Lo normal antes de tener contenedores era instalar el software en cuesti칩n en nuestra m치quina o tal vez recurrir a una m치quina virtual. Lo de la m치quina virtual era pr치ctica habitual cuando sab칤amos que el software a instalar iba a causar estragos en nuestra m치quina, ya fuera en forma de mierda repartida por todo el sistema o en forma de losa de 500kg para el rendimiento.&lt;/p&gt;

&lt;p&gt;Pues ahora tenemos una opci칩n m치s, con las ventajas맋e aislamiento de las m치quinas virtuales pero much칤simo m치s sencillo. Gracias al &lt;a href=&#34;https://hub.docker.com/&#34;&gt;hub de docker&lt;/a&gt;맚enemos al alcance de un &amp;#8220;docker run&amp;#8221; im치genes oficiales de todos los programas mencionados antes y muchos m치s. Incluso tenemos algunas no oficiales que pueden ser de mucha ayuda, como Oracle. Si, Oracle, porque qui칠n narices quiere instalarse Oracle para hacer 4 pruebas pudiendo tirar de una imagen preconfigurada!.&lt;/p&gt;

&lt;p&gt;Si las im치genes est치n curradas (suelen estarlo), podr치s incluso personalizar aspectos del funcionamiento de la aplicaci칩n. Por ejemplo,맓a &lt;a href=&#34;https://hub.docker.com/_/redis/&#34;&gt;imagen de Redis&lt;/a&gt; est치 preparada para poder usar tu propio &amp;#8220;redis.conf&amp;#8221; o simplemente para usar redis con contrase침a.&lt;/p&gt;

&lt;p&gt;Por cierto, aunque las im치genes del &lt;a href=&#34;https://hub.docker.com/r/microsoft/&#34;&gt;repositorio de Microsoft&lt;/a&gt; a칰n no se consideran oficiales dentro del hub de Docker, son las oficiales de Microsoft, son de fiar 游땔&lt;/p&gt;

&lt;p&gt;Tal como lo he mencionado parece que esto de usar Docker durante el desarrollo es algo que s칩lo vale para hacer pruebas. Pues no, puedes usarlo en tu d칤a a d칤a맟 as칤 evitar contaminar tu sistema con instalaciones que luego tienes que actualizar cada cierto tiempo, acumulando cada vez m치s y m치s &amp;#8220;restos&amp;#8221;.&lt;/p&gt;

&lt;p&gt;Un 칰ltimo briconsejo: Si tienes la oportunidad, intenta usar las versiones tageadas como &amp;#8220;alpine&amp;#8221;. Evidentemente,맓as versiones &amp;#8220;alpine&amp;#8221; est치n basadas en &lt;a href=&#34;https://alpinelinux.org/&#34;&gt;Alpine Linux&lt;/a&gt;, una distribuci칩n &amp;#8220;security-oriented&amp;#8221; que pesa s칩lo 5Mb.En la mayor칤a de los casos, teniendo en cuenta que lo que queremos probar es 칰nicamente el software de la imagen que hemos bajado, ser치 suficiente.Como referencia, la imagen &amp;#8220;latest&amp;#8221; de Redis ocupa 74Mb y la &amp;#8220;alpine&amp;#8221; ocupa s칩lo 8Mb.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Nuevos retos</title>
      <link>http://www.modestosanjuan.com/nuevos-retos/</link>
      <pubDate>Fri, 14 Oct 2016 15:40:53 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/nuevos-retos/</guid>
      <description>&lt;p&gt;Estos 칰ltimos dos meses he andado bastante liado y no he prestado mucha atenci칩n al blog. Esta vez no voy a hablar de ning칰n tema t칠cnico, se trata de una post muy personal. Si no te interesa mi vida, deja de leer. Si te interesa, eres un poco cotilla ;P&lt;/p&gt;

&lt;p&gt;Este mes cierro una etapa profesional maravillosa que me ha dado muchas alegr칤as, me ha permitido trabajar con un equipo genial, aprender como no lo hac칤a en muchos a침os y divertirme haciendo lo que m치s me gusta, desarrollar software.&lt;/p&gt;

&lt;p&gt;Para mi estos dos 칰ltimos a침os han sido muy importantes. Hace dos a침os terminaba otra etapa muy importante en mi vida que dur칩 10 a침os y durante la que intent칠 sacar adelante una empresa de desarrollo. Las cosas no terminaron bien y tuve que hacer algo a lo que no estoy acostumbrado, buscar trabajo.&lt;/p&gt;

&lt;p&gt;Y fue precisamente cuando Carlos Bl칠 se cruz칩 en mi camino. Casualmente Carlos estaba en Madrid por trabajo y coincidimos en un par de eventos de MSCoders. Me coment칩 que tal vez saliese un proyecto chulo en las Palmas y me pregunt칩 si me interesar칤a ayudarles dedicando unos d칤as de consultor칤a como experto en .Net.&lt;/p&gt;

&lt;p&gt;Al final el proyecto sali칩 y, en lugar de unos d칤as, termin칩 siendo una propuesta para un proyecto de un a침o, incluyendo los primeros 3 meses en presencial en Las Palmas y con visitas frecuentes el resto del a침o.&lt;/p&gt;

&lt;p&gt;As칤 que me vi de no tener curro, a tener dos ofertas: una de una entidad bancaria &amp;#8220;cerca&amp;#8221; de casa y la otra맗ara un proyecto de un a침o, como aut칩nomo, pasando un periodo bastante largo fuera de casa y teniendo que viajar bastante.&lt;/p&gt;

&lt;p&gt;El caso es que el proyecto de Canarias era muy interesante, para mi iba a ser todo un reto y se planteaba como una oportunidad 칰nica. As칤 que acept칠 la propuesta de Carlos y un mes despu칠s estaba compartiendo piso con 칠l y con Fran en Las Palmas.&lt;/p&gt;

&lt;p&gt;Pas칩 el a침o en un suspiro y el proyecto se renov칩 para otro a침o, que ha vuelto a pasar en un suspiro.&lt;/p&gt;

&lt;p&gt;Han sido dos a침os muy intensos en los que he aprendido much칤simo y he desaprendido m치s todav칤a.Creo que nunca he aprendido tanto맊oncentrado en tan poco tiempo. Y eso es algo que tengo que agradecerle a mucha gente:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;A Alfredo, Carlos y Fran (que no ronca) por subir tanto el list칩n. Gracias a vosotros me siento como los hobbits al volver a la comarca. He crecido, mis estad칤sticas han subido y ahora tengo varios niveles m치s. Pero adem치s tengo a tres맊ompa침eros de aventuras.&lt;/li&gt;
&lt;li&gt;A los trabajadores de Aida, la empresa que ha confiado en nosotros los 칰ltimos dos a침os. La evoluci칩n que hemos podido experimentar en todos ha sido un gran aliciente para seguir맔ejorando. No quiero hacerle el feo a nadie as칤 que no dar칠 nombres 游땔&lt;/li&gt;
&lt;li&gt;Por orden de aparici칩n, a Ronny, Miguel, Dani y Jose.Teneros como aprendices ha sido todo un reto.Ten칠is tanta inquietud que rejuvenezco cuando paso tiempo con vosotros.Compartir piso con vosotros cuando voy a Canarias es como hacer un hackathon diario, pero me ha encantado.&lt;/li&gt;
&lt;li&gt;A Luis Rovirosa, aunque hemos podido맊ompartir poco tiempo juntos, cada vez que lo hemos hecho me has hecho crecer un poquito.&lt;/li&gt;
&lt;li&gt;A Antonio de la Torre. Aunque nuestros caminos pr치cticamente se han cruzado, ha sido genial. S칩lo lamento no haber podido coincidir m치s tiempo, porque no muchos pueden jactarse de haberme hecho cambiar de opini칩n tantas veces en tan poco tiempo. Tenemos que volver a compartir vag칩n bar en el tren camino de alg칰n evento 游땔&lt;/li&gt;
&lt;li&gt;A맔i familia por맚ener tanta paciencia. Ha habido meses en los que he pasado mucho tiempo fuera de casa entre el trabajo y los eventos de la comunidad, pero me han apoyado siempre.&lt;/li&gt;
&lt;li&gt;A la comunidad, por만lla consegu칤 trabajo hace dos a침os y por ella lo cambio ahora.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Me resulta raro dejar una empresa en la que soy feliz. Puede sonar raro que lo explique as칤, pero el cuerpo me pide aprovechar la oportunidad laboral que se me ha presentado. Salgo de Codesai orgulloso de haber formado parte de sus comienzos y con la convicci칩n de que nuestros caminos se volver치n a cruzar de una forma u otra.&lt;/p&gt;

&lt;p&gt;Lo mejor de todo, gracias a la comunidad podremos vernos y compartir teclado.&lt;/p&gt;

&lt;p&gt;Actualizaci칩n: Mis compa침eros de Codesai me han dedicado un [Estos 칰ltimos dos meses he andado bastante liado y no he prestado mucha atenci칩n al blog. Esta vez no voy a hablar de ning칰n tema t칠cnico, se trata de una post muy personal. Si no te interesa mi vida, deja de leer. Si te interesa, eres un poco cotilla ;P&lt;/p&gt;

&lt;p&gt;Este mes cierro una etapa profesional maravillosa que me ha dado muchas alegr칤as, me ha permitido trabajar con un equipo genial, aprender como no lo hac칤a en muchos a침os y divertirme haciendo lo que m치s me gusta, desarrollar software.&lt;/p&gt;

&lt;p&gt;Para mi estos dos 칰ltimos a침os han sido muy importantes. Hace dos a침os terminaba otra etapa muy importante en mi vida que dur칩 10 a침os y durante la que intent칠 sacar adelante una empresa de desarrollo. Las cosas no terminaron bien y tuve que hacer algo a lo que no estoy acostumbrado, buscar trabajo.&lt;/p&gt;

&lt;p&gt;Y fue precisamente cuando Carlos Bl칠 se cruz칩 en mi camino. Casualmente Carlos estaba en Madrid por trabajo y coincidimos en un par de eventos de MSCoders. Me coment칩 que tal vez saliese un proyecto chulo en las Palmas y me pregunt칩 si me interesar칤a ayudarles dedicando unos d칤as de consultor칤a como experto en .Net.&lt;/p&gt;

&lt;p&gt;Al final el proyecto sali칩 y, en lugar de unos d칤as, termin칩 siendo una propuesta para un proyecto de un a침o, incluyendo los primeros 3 meses en presencial en Las Palmas y con visitas frecuentes el resto del a침o.&lt;/p&gt;

&lt;p&gt;As칤 que me vi de no tener curro, a tener dos ofertas: una de una entidad bancaria &amp;#8220;cerca&amp;#8221; de casa y la otra맗ara un proyecto de un a침o, como aut칩nomo, pasando un periodo bastante largo fuera de casa y teniendo que viajar bastante.&lt;/p&gt;

&lt;p&gt;El caso es que el proyecto de Canarias era muy interesante, para mi iba a ser todo un reto y se planteaba como una oportunidad 칰nica. As칤 que acept칠 la propuesta de Carlos y un mes despu칠s estaba compartiendo piso con 칠l y con Fran en Las Palmas.&lt;/p&gt;

&lt;p&gt;Pas칩 el a침o en un suspiro y el proyecto se renov칩 para otro a침o, que ha vuelto a pasar en un suspiro.&lt;/p&gt;

&lt;p&gt;Han sido dos a침os muy intensos en los que he aprendido much칤simo y he desaprendido m치s todav칤a.Creo que nunca he aprendido tanto맊oncentrado en tan poco tiempo. Y eso es algo que tengo que agradecerle a mucha gente:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;A Alfredo, Carlos y Fran (que no ronca) por subir tanto el list칩n. Gracias a vosotros me siento como los hobbits al volver a la comarca. He crecido, mis estad칤sticas han subido y ahora tengo varios niveles m치s. Pero adem치s tengo a tres맊ompa침eros de aventuras.&lt;/li&gt;
&lt;li&gt;A los trabajadores de Aida, la empresa que ha confiado en nosotros los 칰ltimos dos a침os. La evoluci칩n que hemos podido experimentar en todos ha sido un gran aliciente para seguir맔ejorando. No quiero hacerle el feo a nadie as칤 que no dar칠 nombres 游땔&lt;/li&gt;
&lt;li&gt;Por orden de aparici칩n, a Ronny, Miguel, Dani y Jose.Teneros como aprendices ha sido todo un reto.Ten칠is tanta inquietud que rejuvenezco cuando paso tiempo con vosotros.Compartir piso con vosotros cuando voy a Canarias es como hacer un hackathon diario, pero me ha encantado.&lt;/li&gt;
&lt;li&gt;A Luis Rovirosa, aunque hemos podido맊ompartir poco tiempo juntos, cada vez que lo hemos hecho me has hecho crecer un poquito.&lt;/li&gt;
&lt;li&gt;A Antonio de la Torre. Aunque nuestros caminos pr치cticamente se han cruzado, ha sido genial. S칩lo lamento no haber podido coincidir m치s tiempo, porque no muchos pueden jactarse de haberme hecho cambiar de opini칩n tantas veces en tan poco tiempo. Tenemos que volver a compartir vag칩n bar en el tren camino de alg칰n evento 游땔&lt;/li&gt;
&lt;li&gt;A맔i familia por맚ener tanta paciencia. Ha habido meses en los que he pasado mucho tiempo fuera de casa entre el trabajo y los eventos de la comunidad, pero me han apoyado siempre.&lt;/li&gt;
&lt;li&gt;A la comunidad, por만lla consegu칤 trabajo hace dos a침os y por ella lo cambio ahora.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Me resulta raro dejar una empresa en la que soy feliz. Puede sonar raro que lo explique as칤, pero el cuerpo me pide aprovechar la oportunidad laboral que se me ha presentado. Salgo de Codesai orgulloso de haber formado parte de sus comienzos y con la convicci칩n de que nuestros caminos se volver치n a cruzar de una forma u otra.&lt;/p&gt;

&lt;p&gt;Lo mejor de todo, gracias a la comunidad podremos vernos y compartir teclado.&lt;/p&gt;

&lt;p&gt;Actualizaci칩n: Mis compa침eros de Codesai me han dedicado un]&lt;a href=&#34;http://www.codesai.com/2016/10/muchas-gracias-modesto/&#34;&gt;1&lt;/a&gt; de despedida. No puedo hacer otra cosa m치s que reiterar mi agradecimiento. Sois la bomba 游땔&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>쮺u치nto cuesta llamar a un m칠todo?</title>
      <link>http://www.modestosanjuan.com/cuanto-cuesta-llamar-a-un-metodo/</link>
      <pubDate>Tue, 02 Aug 2016 00:03:45 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/cuanto-cuesta-llamar-a-un-metodo/</guid>
      <description>

&lt;p&gt;칔ltimamente Twitter est치 siendo toda una fuente de inspiraci칩n. En esta ocasi칩n el hilo culpable es &lt;a href=&#34;https://twitter.com/jcant0n/status/759081339098464257&#34;&gt;este&lt;/a&gt;.&lt;a href=&#34;https://twitter.com/jcant0n&#34;&gt;Javier Cant칩n&lt;/a&gt;맏ace un comentario respecto a la diferencia de rendimiento existente entre llamar a un m칠todo virtual versus llamar al mismo m칠todo a trav칠s de un interface.&lt;/p&gt;

&lt;p&gt;En este post no pienso맏ablar de lo malvadas que son las optimizaciones prematuras, asumo맘ue el comentario de Javier ten칤a su contexto, as칤 que me voy a quedar con la parte que me ha resultado curiosa. &lt;a href=&#34;https://twitter.com/luisruizpavon/status/759366097497886720&#34;&gt;Luis Ruiz Pav칩n nos coment칩&lt;/a&gt;맘ue hici칠ramos este tipo de mediciones utilizando &lt;a href=&#34;https://github.com/PerfDotNet/BenchmarkDotNet&#34;&gt;BenchmarkDotNet&lt;/a&gt;맟, como me hab칤an surgido un par de dudas, me puse manos a la obra.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Aviso importante:&lt;/strong&gt; las cifras de las mediciones como tal no tienen importancia, cada ordenador tardar치 una cantidad distinta de nanosegundos en efectuar cada operaci칩n, lo que es importante en este caso es observar el diferencial de tiempo que es necesario para ejecutar el m칠todo en cada circunstancia.&lt;/p&gt;

&lt;h2 id=&#34;llamada-directa-a-m칠todo-no-virtual&#34;&gt;Llamada directa a m칠todo no virtual&lt;/h2&gt;

&lt;p&gt;Javier comentaba que en su contexto le interesaban las llamadas a m칠todos virtuales vs interfaces, descartando las llamadas directas a un m칠todo no virtual.No obstante, por dar un poco de contexto respecto al rendimiento, 맔e parec칤a intersante medirlo. Una llamada directa a un m칠todo no virtual tarda tan poco que hay veces que no es capaz de medirlo y me dice que tarda 0.0000 nanosegundos.En algunas de las pruebas la mediana era de &lt;strong&gt;0.0025 ns&lt;/strong&gt;. En realidad este resultado se debe a que el Jit est치 haciendo un inline del m칠todo. Si decoramos el m칠todo con el atributo&lt;strong&gt;[MethodImpl(MethodImplOptions.NoInlining)]&lt;/strong&gt; para que &lt;strong&gt;no haga inline&lt;/strong&gt; (gracias Juanma),맓a mediana es de&lt;strong&gt;1.96 ns&lt;/strong&gt;.&lt;/p&gt;

&lt;h2 id=&#34;directa-virtual-vs-interface&#34;&gt;Directa virtual vs Interface&lt;/h2&gt;

&lt;p&gt;En mi m치quina, una llamada directa a un &lt;strong&gt;m칠todo virtual&lt;/strong&gt; tarda unos &lt;strong&gt;2.91 nanosegundos&lt;/strong&gt;. SI realizamos la misma llamada a trav칠s de un &lt;strong&gt;interface&lt;/strong&gt;, necesita &lt;strong&gt;3.82 nanosegundos&lt;/strong&gt; para cada operaci칩n.&lt;/p&gt;

&lt;p&gt;Como he dicho antes, no voy a entrar a valorar si ahorrar 1 nanosegundo por cada llamada a un m칠todo es algo importante o no, es una cuesti칩n de contexto y estoy seguro de que hay contextos en los que puede ser importante.&lt;/p&gt;

&lt;p&gt;Si asumimos que estamos en un contexto en el que realmente nos importa no sufrir esta penalizaci칩n, podr칤amos descartar el uso de interfaces,맗ero esto맗uede condicionarnos el dise침o en muchos aspectos.&lt;/p&gt;

&lt;h2 id=&#34;clases-abstractas&#34;&gt;Clases abstractas&lt;/h2&gt;

&lt;p&gt;Pensando en c칩mo podr칤a salvar ese problema y obtener un rendimiento como el de una llamada directa pero con las ventajas que da tener un interface, se me ocurri칩 la posibilidad de utilizar una clase abstracta. Es cierto que no es exactamente lo mismo utilizar una clase abstracta que un interface, pero a칰n as칤맊reo que demuestra mucho m치s la intencionalidad que recurrir a un m칠todo virtual.&lt;/p&gt;

&lt;p&gt;La duda era cu치l ser칤a el rendimiento de la llamada a trav칠s de una clase abstracta. 쯉er칤a equivalente al de un interface?&lt;/p&gt;

&lt;p&gt;Pues result칩 que no.Seg칰n mis mediciones, cada llamada tarda unos &lt;strong&gt;2.88 nanosegundos&lt;/strong&gt;. Es m치s, tanto si llamaba a trav칠s de la clase abstracta como si llamaba a trav칠s de la implementaci칩n de la clase abstracta, los tiempos eran los mismos.&lt;/p&gt;

&lt;p&gt;Ojo, aunque en principio parece que es incluso m치s r치pido que la llamada directa a un m칠todo virtual, creo que la diferencia es despreciable y que si repitiese las맔ediciones varias veces, se turnar칤an por ser la m치s r치pida 游땔&lt;/p&gt;

&lt;h2 id=&#34;reflection&#34;&gt;Reflection&lt;/h2&gt;

&lt;p&gt;Ya que estaba, por curiosidad med칤 el tiempo de hacer las llamadas utilizando reflexi칩n, asumiendo que ten칤a cacheado el MethodInfo y midiendo 칰nicamente el Invoke del m칠todo. Cada llamada tardaba &lt;strong&gt;272.87 nanosegundos&lt;/strong&gt;, un abismo comparado con los otros mecanismos.&lt;/p&gt;

&lt;h2 id=&#34;un-poco-m치s-de-detalle&#34;&gt;Un poco m치s de detalle&lt;/h2&gt;

&lt;p&gt;&lt;a href=&#34;https://twitter.com/gulnor?lang=en&#34;&gt;Juanma&lt;/a&gt; me ha comentado, con toda la raz칩n del mundo, que para este tipo de mediciones tan peque침as resulta 칰til recurrir a histogramas. BenchmarkDotNet no tiene actualmente esta funcionalidad, pero lo que si proporciona es la desviaci칩n t칤pica, que puede resultar 칰til para interpretar lo datos. Aqu칤 est치n los resultados de la 칰ltima medici칩n efectuada:&lt;/p&gt;

&lt;div class=&#34;table-responsive&#34;&gt;
  &lt;table  style=&#34;width:100%; &#34;  class=&#34;easy-table easy-table-default &#34; border=&#34;0&#34;&gt;
    &lt;tr&gt;
      &lt;th &gt;
        M칠todo
      &lt;/th&gt;
      
      &lt;th &gt;
        Mediana
      &lt;/th&gt;
      
      &lt;th &gt;
        Desviaci칩n
      &lt;/th&gt;
    &lt;/tr&gt;
    
    &lt;tr&gt;
      &lt;td &gt;
        Directo no virtual
      &lt;/td&gt;
      
      &lt;td &gt;
        0.0025 ns
      &lt;/td&gt;
      
      &lt;td &gt;
        0.0853 ns
      &lt;/td&gt;
    &lt;/tr&gt;
    
    &lt;tr&gt;
      &lt;td &gt;
        Direct no virtual no inline
      &lt;/td&gt;
      
      &lt;td &gt;
        1.9673 ns
      &lt;/td&gt;
      
      &lt;td &gt;
        0.1040 ns
      &lt;/td&gt;
    &lt;/tr&gt;
    
    &lt;tr&gt;
      &lt;td &gt;
        Directo virtual
      &lt;/td&gt;
      
      &lt;td &gt;
        2.9151 ns
      &lt;/td&gt;
      
      &lt;td &gt;
        0.0917 ns
      &lt;/td&gt;
    &lt;/tr&gt;
    
    &lt;tr&gt;
      &lt;td &gt;
        Interface
      &lt;/td&gt;
      
      &lt;td &gt;
        3.8213 ns
      &lt;/td&gt;
      
      &lt;td &gt;
        0.1464 ns
      &lt;/td&gt;
    &lt;/tr&gt;
    
    &lt;tr&gt;
      &lt;td &gt;
        Abstract
      &lt;/td&gt;
      
      &lt;td &gt;
        2.8829 ns
      &lt;/td&gt;
      
      &lt;td &gt;
        0.1113 ns
      &lt;/td&gt;
    &lt;/tr&gt;
    
    &lt;tr&gt;
      &lt;td &gt;
        Directo con reflexi칩n
      &lt;/td&gt;
      
      &lt;td &gt;
        272.8738 ns
      &lt;/td&gt;
      
      &lt;td &gt;
        17.7846 ns
      &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;
&lt;/div&gt;

&lt;h1 id=&#34;conclusi칩n&#34;&gt;Conclusi칩n&lt;/h1&gt;

&lt;p&gt;Si alguna vez nos preocupa tant칤simo만l rendimiento, podemos utilizar una clase abstracta만n lugar de un interface (ya, ya he dicho antes que no es lo mismo).&lt;/p&gt;

&lt;p&gt;Cualquier excusa es buena para calentarse un poco la cabeza y sacar unos cuantos datos맗eculiares.&lt;/p&gt;

&lt;p&gt;Este tipo de posts no valen pr치cticamente para nada, pero el datap0rn tiene su gracia y me ha resultado muy entretenido escribirlo.&lt;/p&gt;

&lt;p&gt;BenchmarkDotNet mola, aunque tarda coj칩n y medio en hacer cada medici칩n 游&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Claves primarias: inmutabilidad y generaci칩n</title>
      <link>http://www.modestosanjuan.com/claves-primarias-inmutabilidad-y-generacion/</link>
      <pubDate>Sat, 30 Jul 2016 23:39:11 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/claves-primarias-inmutabilidad-y-generacion/</guid>
      <description>

&lt;p&gt;Hace unos d칤as&lt;a href=&#34;https://twitter.com/Pablyte/status/754056720666730500&#34;&gt;Pablo Iglesias&lt;/a&gt;&lt;a href=&#34;https://twitter.com/Pablyte/status/754056720666730500&#34;&gt;tuite칩&lt;/a&gt;맛na pregunta de Stack Exchange en la que hablaban sobre la inmutabilidad de las claves primarias. Se gener칩 un debate bastante interesante en Twitter que se extendi칩 m치s all치 de la cuesti칩n de la inmutabilidad. Este es un intento de recopilar y explicar algunos de맓os conceptos que se mencionaron durante ese debate.&lt;/p&gt;

&lt;h1 id=&#34;claves-primarias-mutables-o-inmutables&#34;&gt;Claves primarias mutables o inmutables&lt;/h1&gt;

&lt;p&gt;Para el que ande un poco perdido con el concepto, b치sicamente se trata de determinar si la clave primaria de una entidad deber칤a poder cambiar o no una vez establecida. Por ejemplo: si me registro en un servicio online y utilizan mi email como PK, si el servicio me da la opci칩n de cambiar mi cuenta de correo, la PK만s mutable. Esto significa que en todos los sitios en los que el servicio se est칠 persistiendo mi email como PK맜a a tener que actualizar el dato para constatar el cambio. Independientemente de que usemos o no foreign keys, esto es un foco de dolor, especialmente맙i utilizamos distintos mecanismos de persistencia de datos. Si adem치s nuestro software cuenta con funcionalidades como con auditar los cambios o cualquier tipo de integraci칩n con sistemas externos como herramientas de CRM y similar, tener PKs mutables se puede convertir en algo imposible.&lt;/p&gt;

&lt;p&gt;Parece que hubo un consenso generalizado respecto a que las PK deber칤an ser inmutables, as칤 que no me voy a extender m치s en este punto.&lt;/p&gt;

&lt;h1 id=&#34;claves-subrogadas-o-naturales&#34;&gt;Claves subrogadas o naturales&lt;/h1&gt;

&lt;p&gt;Cuando usamos una clave natural, el valor de la clave est치 relacionado con los datos que identifica. Por ejemplo, si estamos identificando libros, el ISBN podr칤a ser un candidato a PK.El n칰mero de bastidor para un coche, n칰mero de serie de un ordenador, la MAC de una tarjeta de red, el n칰mero de una factura, etc.En resumen, utilizamos un dato del negocio para identificar nuestras entidades마l persistirlas.&lt;/p&gt;

&lt;p&gt;Si, por otro lado, elegimos usar una clave subrogada, lo que estamos haciendo es generar un identificador 칰nico que no tiene nada que ver con los datos que identifica, pero se garantiza a nivel infraestructura que el dato es 칰nico.&lt;/p&gt;

&lt;p&gt;Aunque siempre pongo un gran &amp;#8220;depende&amp;#8221; y no soy muy amigo de las afirmaciones absolutas, la realidad es que llevo a침os utilizando claves subrogadas porque la experiencia me ha demostrado맘ue suele ser una mala idea utilizar datos del negocio. La raz칩n es muy sencilla: el negocio cambia.&lt;/p&gt;

&lt;p&gt;Ejemplos hay miles. Por tomar uno,&lt;a href=&#34;https://twitter.com/panicoenlaxbox&#34;&gt;Sergio Le칩n&lt;/a&gt;맔encionaba los ISBN de los libros.Desarrollando un software para gestionar liber칤as podr칤amos pensar que el ISBN deber칤a valernos, pero los libros muy viejos no tienen ISBN. As칤 que si de repente al librero le diese por dedicarse a vender libros antiguos de colecci칩n, tendr칤amos un problema importante. Ese tipo de situaciones맙e dan con mucha frecuencia y siempre맊uando el desarrollo ya est치 bastante avanzado, que es cuando m치s da침o hacen.&lt;/p&gt;

&lt;p&gt;Como el ejemplo del ISBN hay muchos y debemos tener en cuenta el coste del cambio. Hay qui칠n podr칤a utilizar el argumento de que es un error pensar en el futuro y que usar una clave subrogada es una decisi칩n prematura basada en anticiparse a un posible cambio de negocio que no sabemos si alguna vez va a suceder. En esas circunstancias suele ser un buen ejercicio pensar en cu치l ser칤a el coste del cambio en el futuro frente al coste de usar una clave subrogada en el presente. Si lo pensamos en t칠rminos econ칩micos, utilizar una clave natural podr칤a implicar estar firmando una hipoteca muy cara.&lt;/p&gt;

&lt;p&gt;Adem치s, como말ndicaba &lt;a href=&#34;https://twitter.com/pmolinam&#34;&gt;Pedro J. Molina&lt;/a&gt;, &amp;#8220;Si vas por clave natural acaba uno f치cilmente con claves compuestas. Las de 4 campos ya no hacen gracia&amp;#8221;. Pero es que encima eso termina tocando mucho las narices cuando llega el momento de &amp;#8220;enchufarte&amp;#8221; a otras cosas. Es t칤pico que el servicio que te permite asociar comentarios, likes, etc. te pida que le des un identificador먞죭ico de tu entidad y nos podr칤amos volver locos buscando ejemplos que nos llevan a desear trabajar siempre con una clave subrogada.&lt;/p&gt;

&lt;h2 id=&#34;generaci칩n-de-las-claves-subrogadas&#34;&gt;Generaci칩n de las claves subrogadas&lt;/h2&gt;

&lt;p&gt;Venga, vamos a suponer que a estas alturas ya estamos convencidos de que vamos a identificar a nuestras entidades con claves inmutables y subrogadas al menos algunas veces. 쮺칩mo las generamos? Este punto tambi칠n gener칩 debate y만n este caso no hab칤a맛nanimidad ni de lejos.&lt;/p&gt;

&lt;p&gt;Para generar una clave subrogada podemos optar por dejar que la base de datos la genere por nosotros autom치ticamente cuando insertamos el registro o podemos ser nosotros desde el c칩digo los que proporcionemos la clave a la base de datos.&lt;/p&gt;

&lt;p&gt;La opci칩n cl치sica es que la base de datos genere el identificador por ti y listo. Podemos usar un말dentity, secuencia o lo que nos proporcione la base de datos que utilicemos y no nos complicamos mucho la vida. Pero hay escenarios en los que맕os podr칤a interesar recurrir a otro tipo de mecanismos.&lt;/p&gt;

&lt;h2 id=&#34;mecanismos-para-la-generaci칩n-de-claves-subrogadas&#34;&gt;Mecanismos para la generaci칩n de claves subrogadas&lt;/h2&gt;

&lt;p&gt;Aunque podr칤amos ponernos muy creativos de cara a la generaci칩n de nuestras claves, hay ciertos mecanismos predominantes. No voy a posicionarme respecto a ninguno porque creo que su utilizaci칩n depende mucho de los requisitos del negocio y de la infraestructura de la aplicaci칩n.&lt;/p&gt;

&lt;h3 id=&#34;guids&#34;&gt;Guids&lt;/h3&gt;

&lt;p&gt;Generar Guids es algo sencillo, se puede hacer desde cualquier sitio y las posibilidades de colisi칩n son absolutamente despreciables. En principio es un mecanismo interesante ya que nos permite tener el control desde el negocio y no depender de맓a base de datos para su generaci칩n. Adem치s, entre sus virtudes podemos considerar que al usar un Guid estamos utilizando un identificador맕o s칩lo a맓a tabla, tambi칠n entre todas las tablas e incluso entre varias bases de datos. Esto habilita con mucha m치s facilidad escenarios de &amp;#8220;merge&amp;#8221; en los que queremos juntar datos que provienen de varias fuentes.&lt;/p&gt;

&lt;p&gt;Por supuesto, tambi칠n tiene sus contras, entre ellos que un Guid ocupa much칤simo m치s que una clave num칠rica y adem치s &lt;a href=&#34;http://sqlmag.com/database-performance-tuning/clustered-indexes-based-upon-guids&#34;&gt;afecta negativamente&lt;/a&gt; al rendimiento de los 칤ndices clustered.&lt;/p&gt;

&lt;p&gt;Hay mucha literatura sobre este tema en internet, incluyendo algunos intentos de an치lisis sobre la diferencia desde el punto de vista de rendimiento. Adem치s debemos tener en cuenta que la implementaci칩n de base de datos que utilicemos influye much칤simo. Como ejemplo, no es lo mismo usar &lt;a href=&#34;http://krow.livejournal.com/497839.html&#34;&gt;MySQL&lt;/a&gt; que &lt;a href=&#34;http://www.informit.com/articles/printerfriendly/25862&#34;&gt;SQL Server&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;num칠rico-autoincrementado&#34;&gt;Num칠rico마utoincrementado&lt;/h3&gt;

&lt;p&gt;Este맔ecanismo es uno de los m치s frecuentes y creo que no necesita mucha explicaci칩n. El standard SQL:2003 define los tipos IDENTITY y SEQUENCE pero dependemos de la base de datos que estemos utilizando. Por ejemplo, en MySQL est치 elㅁUTO_INCREMENT y en PostgreSQL tambi칠n est치 el SERIAL (creo que es &amp;#8220;azucar sint치ctico&amp;#8221; para definir un SEQUENCE).&lt;/p&gt;

&lt;h3 id=&#34;hilo&#34;&gt;HiLo&lt;/h3&gt;

&lt;p&gt;A grandes rasos, con HiLo la aplicaci칩n reserva맊on antelaci칩n en la base de datos맛n rango de identificadores que ser치n utilizados necesite말nsertar nuevos registros en la base de datos. Cuando la aplicaci칩n ha usado todos los identificadores, va a la base de datos y reserva m치s. NHibernate usa esta t칠cnica y tambi칠n es posible맛sarla en Entity Framework. Entre sus ventajas만st치 que nos permite utilizar identificadores de tipo num칠rico (para los que demandan rendimiento)맟 entre las desventajas que genera &amp;#8220;lagunas&amp;#8221; entre los identificadores generados. Si una aplicaci칩n reserva los말dentificadores del 1 al 10 y luego usa 칰nicamente 5, los identificadores de 6 al 10 quedar치n sin usar.&lt;/p&gt;

&lt;h3 id=&#34;dependiendo-de-un-tercero&#34;&gt;Dependiendo de un tercero&lt;/h3&gt;

&lt;p&gt;Consiste en delegar en un tercero la estrategia de generaci칩n de nuestra clave. Desde nuestra aplicaci칩n, cuando queramos identificar una entidad, llamaremos a este servicio externo y nos proporcionar치 una identidad맘ue ser치 la que luego persistiremos.&lt;/p&gt;

&lt;p&gt;Cuando estamos haciendo HiLo, en parte estamos utilizando este mecanismo. Aunque sea nuestra막ase de datos la que genera los identificadores, en realidad es un tercero (la clase que gestiona el algoritmo) el que nos los est치 proporcionando.&lt;/p&gt;

&lt;p&gt;Un ejemplo (raro pero real)만s맛tilizarlo cuando la맗ersistencia se realiza sobre mecanismos que no tienen soporte de autonum칠ricos, delegando la generaci칩n del autonum칠rico sobre un tercero para luego persistir el dato. Otro escenario de uso ser칤a si necesitamos asegurarnos de que nuestros identificadores son 칰nicos entre varios sistemas y adem치s queremos aplicar reglas especiales para su generaci칩n.&lt;/p&gt;

&lt;p&gt;Siendo realistas, es un mecanismo que a침ade complejidad y no es necesario la mayor칤a de las veces, pero no deja de ser interesante mencionarlo.&lt;/p&gt;

&lt;h2 id=&#34;cu치l-uso&#34;&gt;쮺u치l uso?&lt;/h2&gt;

&lt;p&gt;Seg칰n las respuestas a la conversaci칩n que origin칩 el debate, una gran mayor칤a responder칤a &amp;#8220;secuencias num칠ricas autoincrementadas맟 no me complico&amp;#8221;. No les falta raz칩n, pero hay veces que맊omplicarnos es la opci칩n menos complicada. Complicado, eh? 游땔&lt;/p&gt;

&lt;p&gt;Existen muchas razones que podr칤an llevarnos a querer complicarnos la vida y no pretendo hacer un estudio detallado, pero al menos quiero poner algunos ejempos comunes.&lt;/p&gt;

&lt;h3 id=&#34;cqs&#34;&gt;CQS&lt;/h3&gt;

&lt;p&gt;Si queremos맛sar&lt;a href=&#34;http://martinfowler.com/bliki/CommandQuerySeparation.html&#34;&gt;CQS&lt;/a&gt; (Command-Query Separation) partimos del principio de que nuestros comandos no devuelven맕ada. Si tenemos un comando que inserta una entidad,맋eber칤amos saber el id de la entidad que estamos insertando antes de llamar al propio comando, ya que el comando no va a devolvernos nada.&lt;/p&gt;

&lt;p&gt;Podr칤amos pensar que tampoco pasa nada porque un comando de inserci칩n devuelva un valor y ya est치. No voy a entrar a valorar esto, pero en cuanto queramos que el modelo de ejecuci칩n de nuestros comandos sea as칤ncrono (a trav칠s de una cola o similar), volvemos al problema inicial.&lt;/p&gt;

&lt;h3 id=&#34;modo-offline&#34;&gt;Modo offline&lt;/h3&gt;

&lt;p&gt;Si맕uestra aplicaci칩n tiene como requisito de negocio proporcionar맓a posibilidad trabajar offline, recurrir al servidor de base de datos para obtener el id de una entidad no es una opci칩n.&lt;/p&gt;

&lt;p&gt;Imaginemos una aplicaci칩n como Evernote. Cuando creemos una nueva nota y no tengamos conexi칩n, 쯤u칠 identificador tendr치 esa nota entonces? Si generamos ese identificador desde el c칩digo (mediante, por ejemplo, un GUID) podremos realizar la sincronizaci칩n f치cilmente una vez tengamos conexi칩n.&lt;/p&gt;

&lt;p&gt;Aunque en el caso de CQS, HiLo podr칤a ser una opci칩n perfectamente v치lida, en este caso ser칤a la opci칩n menos recomendada ya que tendr칤amos la necesidad de conectarnos al servidor de base de datos si creamos tantas entidades que agotamos nuestro &amp;#8220;cupo&amp;#8221; de identificadores.&lt;/p&gt;

&lt;h3 id=&#34;si-no-usamos-sql&#34;&gt;Si no usamos SQL&lt;/h3&gt;

&lt;p&gt;Este caso만s ignorado por muchos desarrolladores cuyo contexto profesional se limita a bases de datosSQL para persistir informaci칩n. Cuando salimos del mundo SQL,맔uch칤simos맔ecanismos de persistencia piden que seamos nosotros desde el c칩digo los que proporcionemos nuestros identificadores.Como ejemplo &amp;#8220;primitivo&amp;#8221; a la par que 칰til,맙i persistimos en disco tendremos que proporcionar nosotros el identificador de nuestra entidad (nombre del archivo).&lt;/p&gt;

&lt;h1 id=&#34;conclusiones&#34;&gt;Conclusiones&lt;/h1&gt;

&lt;p&gt;Tenemos multitud de mecanismos para identificar nuestras entidades. Debemos conocerlos bien y hacer un uso inteligente de ellos en funci칩n de nuestros requisitos de negocio, pero nunca complicarnos la vida innecesariamente.Y muy importante, que el rendimiento 칰nicamente sea un argumento cuando tenemos requisitos no funcionales que nos hablan de rendimiento. Hablar de rendimiento cuando no tienes requisitos relacionados con el rendimiento suele ser foco de optimizaciones prematuras.&lt;/p&gt;

&lt;p&gt;Y con esto creo que termino el &amp;#8220;resumen&amp;#8221; de las cosas que se comentaron en el hilo de Twitter y algunas de las que pasaron por mi cabeza. Seguro que me dejo en el tintero muchas observaciones y muchos matices,맔e conformo si a alguien le vale para entender맘ue hay vida m치s all치 de los identificadores mutables naturales 游&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Palabras malditas</title>
      <link>http://www.modestosanjuan.com/palabras-malditas/</link>
      <pubDate>Mon, 13 Jun 2016 10:02:56 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/palabras-malditas/</guid>
      <description>

&lt;h1 id=&#34;extreme-programming-y-el-desarrollo-치gil&#34;&gt;Extreme programming y el desarrollo 치gil&lt;/h1&gt;

&lt;p&gt;A principios de siglo (dicho as칤 parece que queda muy atr치s, eh&amp;#8230; :P)맚rabajaba en Indra como coordinador de un equipo de desarrollo.En mi entorno profesional era un poco como un bicho raro porque, adem치s de ser 10 a침os m치s joven que la media de mi puesto, era de los pocos que se negaba a abandonar el맋esarrollo para dedicarme plenamente a la gesti칩n.&lt;/p&gt;

&lt;p&gt;Recuerdo que en esa 칠poca le칤 sobre Extreme Programming y me pareci칩 muy interesante. He de reconocer que por aquel entonces no entend칤 bien la parte de programar en pareja y seguro que malentend칤 otras partes, pero empatic칠 con los valores que promov칤a y algunas pr치cticas casualmente ya las llev치bamos마plicando en nuestro d칤a a d칤a desde los inicios del equipo.&lt;/p&gt;

&lt;p&gt;En una ocasi칩n un compa침ero me vino a buscar y justo estaba leyendo sobre el tema. Sus primeras reacciones마l leer las palabras &amp;#8220;Extreme Programming&amp;#8221; fueron del tipo: &amp;#8220;쯣rogramaci칩n extrema? 춰aqu칤 no queremos cosas extremas!&amp;#8221;.Le coment칠 que era un proceso 치gil que&amp;#8230; &amp;#8220;치gil, ah! vale, eso ya me gusta m치s&amp;#8221; y el resto de la historia ya da igual.&lt;/p&gt;

&lt;h1 id=&#34;el-freelance-y-el-profesional-independiente&#34;&gt;El freelance y el맗rofesional말ndependiente&lt;/h1&gt;

&lt;p&gt;El a침o pasado맋i una charla en una comunidad de desarrollo y puse en mi bio que era desarrollador freelance. Tengo un conflicto personal con este tipo de &amp;#8220;biograf칤as&amp;#8221; porque me obligan a definirme y es algo que me suele resultar inc칩modo, especialmente cuando estoy en un periodo de transici칩n en el que lo que soy no lo termino de tener claro ni yo mismo. El caso es que alguien me coment칩: &amp;#8220;no pongas freelance, que es una palabra que tiene connotaciones negativas, pon mejor que eres profesional independiente&amp;#8221;.&lt;/p&gt;

&lt;h1 id=&#34;el-problema-de-discutir-sobre-la-palabra&#34;&gt;El problema de discutir sobre la맗alabra&lt;/h1&gt;

&lt;p&gt;He mencionado만stas dos an칠cdotas precisamente porque para mi son dos ejemplos del mismo problema맊on 15 a침os de separaci칩n. Cargamos de tanto significado, connotaciones y prejuicios ciertas palabras que al final맚erminamos adorando u odiando las palabras en si mismas independientemente del significado que tengan para la persona que las utiliza.&lt;/p&gt;

&lt;p&gt;Durante el fin de semana vi la charla de David Bonilla sobre&amp;#8220;El programador Moderno&amp;#8221;맟 me많ust칩 bastante, aunque no coincid칤 para nada con 칠l respecto a su interpretaci칩n de la met치fora del Software Craftsmanship. B치sicamente David말nterpreta que la escuela craftsman dice que &amp;#8220;los programadores de verdad son los que hacen un c칩digo que podr칤a pasar cualquier tipo de inspecci칩n, que lo que importa es que perfecciones tu pr치ctica de la programaci칩n hasta llegar a ser un artesano del software&amp;#8221;. El problema es que para mi est치 haciendo una interpretaci칩n que diverge completamente de la que yo hago sobre la met치fora del Software Craftsmanship.&lt;/p&gt;

&lt;p&gt;쮼st치 David equivocado?쯃o estoy yo?Creo que la equivocaci칩n es맋iscutir sobre la met치fora. Estoy seguro de que hay personas que interpretan el movimiento de Software Craftsmanship como lo hace David en su v칤deo, otras맘ue lo interpretan como yo muchas otras que lo interpretan de formas completamente distintas.&lt;/p&gt;

&lt;p&gt;Lo curioso es que el manifiesto del Software Craftsmanship dice 칰nicamente esto:&lt;/p&gt;

&lt;blockquote&gt;
&lt;div class=&#34;left&#34;&gt;
  Not only working software,
&lt;/div&gt;

&lt;div class=&#34;right&#34; style=&#34;padding-left: 60px;&#34;&gt;
  but also &lt;strong&gt;&lt;span class=&#34;value&#34;&gt;well-crafted software&lt;/span&gt;&lt;/strong&gt;
&lt;/div&gt;

&lt;div class=&#34;left&#34;&gt;
  Not only responding to change,
&lt;/div&gt;

&lt;div class=&#34;right&#34; style=&#34;padding-left: 60px;&#34;&gt;
  but also &lt;strong&gt;&lt;span class=&#34;value&#34;&gt;steadily adding value&lt;/span&gt;&lt;/strong&gt;
&lt;/div&gt;

&lt;div class=&#34;left&#34;&gt;
  Not only individuals and interactions,
&lt;/div&gt;

&lt;div class=&#34;right&#34; style=&#34;padding-left: 60px;&#34;&gt;
  but also &lt;strong&gt;&lt;span class=&#34;value&#34;&gt;a community of professionals&lt;/span&gt;&lt;/strong&gt;
&lt;/div&gt;

&lt;div class=&#34;left&#34;&gt;
  Not only customer collaboration,
&lt;/div&gt;

&lt;div class=&#34;right&#34; style=&#34;padding-left: 60px;&#34;&gt;
  but also &lt;strong&gt;&lt;span class=&#34;value&#34;&gt;productive partnerships&lt;/span&gt;&lt;/strong&gt;
&lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;쯈ui칠n no puede estar de acuerdo con este manifiesto? 춰S칩lo le falta un &amp;#8220;making the world a better place&amp;#8221;! 游땔&lt;/p&gt;

&lt;h1 id=&#34;el-peligro-de-criticar-la-palabra-en-lugar-de-las-pr치cticas&#34;&gt;El peligro de criticar la맗alabra en lugar de las pr치cticas&lt;/h1&gt;

&lt;p&gt;Desde mi punto de vista, el mayor problema que suele acompa침ar a la cr칤tica de una met치fora, es que no criticas algo concreto, criticas la interpretaci칩n que cada persona tenga de esa palabra. Y el mayor problema es el da침o que puedes estar haciendo al colectivo que se identifica con esa met치fora, pero que interpreta la met치fora de una forma distinta a la que t칰 lo haces.&lt;/p&gt;

&lt;p&gt;El ejemplo de David no es el primero ni ser치 el 칰ltimo. En la CAS del 2015, Leo Antoli맏ace referencia en &lt;a href=&#34;https://www.youtube.com/watch?v=XSUaoBdfmsY&#34;&gt;su keynote&lt;/a&gt;마 varias met치foras, la del Software Craftsmanship entre ellas. Lo curioso es que만n este caso puso una foto de Manolo y Benito, de la serie &amp;#8220;Manos a la obra&amp;#8221;. No se realmente cu치l era만l mensaje que quer칤a dar Leo en este caso, pero imagino que si alguien pone en una presentaci칩n un slide con su empresa, su nombre, o el de un colectivo맊on el que se identifica y debajo la imagen de un par de chapuzas, no le har칤a mucha gracia.&lt;/p&gt;

&lt;p&gt;Volviendo al v칤deo de David, cualquiera que vea su charla y no tenga idea de qu칠 es eso맋el Software Craftsmanship, puede que herede el pensamiento de que son un grupo de gente que s칩lo se preocupan de que su c칩digo sea tan limpio que se pueda comer encima. Un poco m치s adelante David anima al p칰blico a que se involucren en la comunidad,마sistan a meetups, etc.Supongo맗ocos asistentes de esa charla se animar치n a ir a estos&lt;a href=&#34;http://www.meetup.com/topics/software-craftsmanship/&#34;&gt;meetups&lt;/a&gt;멇릧&lt;/p&gt;

&lt;h1 id=&#34;da-feedback-칰til-que-no-te-ciegue-la-ira&#34;&gt;Da feedback 칰til, que no te ciegue la ira 游땔&lt;/h1&gt;

&lt;p&gt;쯃eo o David son malas personas y habr칤a que sacrificarlas ante el dios del Software Craftsmanship? Pues tampoco. Al final son dos personas que맏an tenido la oportunidad de enviar un mensaje importante y lo han hecho de la mejor manera que han sabido/podido.No me he visto nunca en la tesitura de dar una charla de este tipo, pero imagino que no tiene que ser f치cil.&lt;/p&gt;

&lt;p&gt;Comunicar no es f치cil, muestra de ello es este post, que seguro que me ha quedado un co침azo infumable que no expresa ni la mitad de lo que quer칤a decir. Por eso creo que es muy importante el feedback. Si tienes la oportunidad de dar feedback, no lo dudes, pero desde el respeto. Por ejemplo, a David le respond칤 a trav칠s de&lt;a href=&#34;https://twitter.com/david_bonilla/status/741555880404082689&#34;&gt;Twitter&lt;/a&gt;맟 espero poder continuar la charla un d칤a con unas cervezas. A Leo se lo di en la CAS, justo despu칠s de la keynote, y creo que fue맛n error porque seguro que ni se acuerda de lo que hablamos xD&lt;/p&gt;

&lt;p&gt;A todo esto, a mi en realidad la met치fora del Software Craftsmanship tampoco me va, yo soy jardinero del software! 游땔&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Presta atenci칩n a tus datos de pruebas</title>
      <link>http://www.modestosanjuan.com/presta-atencion-a-tus-datos-de-pruebas/</link>
      <pubDate>Mon, 29 Feb 2016 23:04:10 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/presta-atencion-a-tus-datos-de-pruebas/</guid>
      <description>

&lt;p&gt;Los datos utilizados en las pruebas맙on muy importantes y, aunque el tema de este post parece muy obvio, no son pocas la veces que me he encontrado con problemas debido a este tema, as칤 que creo que merece la pena dedicarle al menos unas l칤neas.&lt;/p&gt;

&lt;p&gt;Hay varios aspectos que son importantes a tener en cuenta al definir datos para nuestras pruebas autom치ticas. En este post me voy a centrar en tres errores que me encuentro con frecuencia:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Datos diferentes con los mismos valores&lt;/li&gt;
&lt;li&gt;Exceso de datos innecesarios para el test&lt;/li&gt;
&lt;li&gt;Utilizaci칩n de datos que dan lugar a confusi칩n&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&#34;datos-diferentes-con-los-mismos-valores&#34;&gt;Datos diferentes con los mismos valores&lt;/h2&gt;

&lt;p&gt;Este problema se da especialmente cuando hablamos de datos num칠ricos, ya que son los m치s맙usceptibles de ser repetidos en los tests.Supongamos que맘ueremos probar un m칠todo맘ue nos permite dividir dos n칰meros y obtener el resultado (un ejemplo muy original, eh? ;P). Un claro ejemplo de una prueba con datos incorrectos ser칤a este:&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true &#34;&gt;[Test]
public void Divide() {
    var result = Divide(2, 2);
    result.Should().Be(1);
}&lt;/pre&gt;

&lt;p&gt;Teniendo en cuenta los datos de este test,만s perfectamente posible confundir el dividendo y el divisor porque al invertirlos el resultado es el mismo. No s칩lo se dificulta la lectura del test, es que una implementaci칩n podr칤a darnos un falso verde.&lt;/p&gt;

&lt;p&gt;Evidentemente este ejemplo es muy b치sico, pero este tipo de errores se comete con bastante frecuencia맊uando tenemos identificadores num칠ricos,맜alores para expresar cantidades o fechas. Es t칤pico utilizar&amp;#8220;1&amp;#8221; como identificador num칠rico맗ero cuando tenemos que hacer una prueba con el usuario con id 1 de la empresa 1 es muy importante pararnos unos segundos y buscar datos que no puedan ser confundidos.&lt;/p&gt;

&lt;h2 id=&#34;exceso-de-datos-innecesarios-para-el-test&#34;&gt;Exceso de datos innecesarios para el test&lt;/h2&gt;

&lt;p&gt;Otro de los problemas habituales es proporcionar m치s datos de los estrictamente necesarios para el objetivo de nuestro test.Si estamos escribiendo un tests para맜erificar el funcionamiento de맛n API que puede recibir varios par치metros pero algunos son obligatorios y otros opcionales,맓o recomendable es que맊reemos varios tests para contemplar desde el escenario m치s b치sico a los escenarios m치s complejos. Supongamos que tenemos una calculadora de descuentos para clientes que necesita recibir como par치metro un cliente que tenga un identificador, pa칤s de procedencia y actividad para poder calcular su descuento correspondiente.&lt;/p&gt;

&lt;pre class=&#34;lang:default decode:true&#34;&gt;var client = GivenAClient (Id:1, Name:&#34;Peter&#34;, Country:&#34;Spain&#34;, Activity:&#34;Development&#34;, Sector:&#34;Software&#34;);
discountCalculator.CalculateFor(client);&lt;/pre&gt;

&lt;p&gt;Leyendo este ejemplo parece que un cliente necesita맚odos los campos para poder calcular un descuento, pero estamos especificando el &lt;em&gt;sector&lt;/em&gt; y resulta que era irrelevante, lo que pasa es que nuestro af치n de reutilizaci칩n nos ha jugado una mala pasada. Si asumimos que nuestros맚ests pueden servir como documentaci칩n맗ara otros desarrolladores (o incluso para nuestro yo del futuro),맊uanto m치s concisos seamos con esta informaci칩n,맔ejor.&lt;/p&gt;

&lt;h2 id=&#34;utilizaci칩n-de-datos-que-dan-lugar-a-confusi칩n&#34;&gt;Utilizaci칩n de datos que dan lugar a confusi칩n&lt;/h2&gt;

&lt;p&gt;En otras ocasiones tenemos맋atos de presencia necesaria pero de valor irrelevante맗ara la ejecuci칩n del test. Es importante que en el test quede claro que el valor nos da igual y que no influye en la ejecuci칩n del test.En este caso las consecuencias pueden ser similares al punto anterior ya que el test puede generar confusi칩n al leerlo.&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true&#34;&gt;var client = GivenAClient (Id:1, Name:&#34;Peter&#34;, Country:&#34;Spain&#34;, Activity:&#34;Development&#34;);
discountCalculator.CalculateFor(client);&lt;/pre&gt;

&lt;p&gt;Al leer este c칩digo podr칤amos pensar que el pa칤s y la actividad son relevantes para el c치lculo del descuento 칰nicamente porque estamos utilizando valores espec칤ficos. Pero, 쯤u칠 pasa si recurrimos a valores gen칠ricos excepto cuando realmente el valor es relevante?&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true&#34;&gt;var client = GivenAClient (Id:Any.Id, Name:Any.Name, Country:&#34;Spain&#34;, Activity:Any.Activity);
discountCalculator.CalculateFor(client);&lt;/pre&gt;

&lt;p&gt;Con este peque침o cambio queda mucho m치s clara la informaci칩n relevante para el test y tanto los compa침eros como nuestro yo del futuro lo agradecer치 mucho.&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Impresiones sobre pair programming</title>
      <link>http://www.modestosanjuan.com/impresiones-sobre-pair-programming/</link>
      <pubDate>Tue, 19 Jan 2016 01:13:56 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/impresiones-sobre-pair-programming/</guid>
      <description>

&lt;p&gt;El viernes맔antuve una conversaci칩n bastante entretenida sobre desarrollo de software con un compa침ero de profesi칩n. Trabaja en una entidad financiera y al hablar de cosas como TDD, Agile, XP, etc. ten칤a ciertos sentimientos enfrentados. Precisamente uno de los temas맘ue le causaban controversia era el맗air programming. Su opini칩n b치sicamente se resum칤a en una frase: &amp;#8220;yo lo que no compro es맘ue dos t칤os senior sentados juntos a programar van a ser m치s productivos que si programan por separado&amp;#8221;.&lt;/p&gt;

&lt;p&gt;As칤 que me he animado a escribir un post con mi opini칩n맙obre este tema y aportar as칤 mi punto de vista (aunque a nadie le importe xD).&lt;/p&gt;

&lt;h1 id=&#34;antecedentes&#34;&gt;Antecedentes&lt;/h1&gt;

&lt;p&gt;Me encanta programar solo. Disfruto much칤simo sentado delante del teclado맔ientras me enfrento a un reto t칠cnico o busco una aproximaci칩n de dise침o que me convenza.Tambi칠n me encanta pasarme horas leyendo맊칩digo de proyectos open source para ver c칩mo hacen las cosas otros equipos de desarrollo. Disfruto haciendo generadores de c칩digo que generan c칩digo para generar generadores de c칩digo. En resumen, me encanta liarme la manta a la cabeza y perderme las horas muertas en todo lo que tenga que ver con el desarrollo de software.&lt;/p&gt;

&lt;p&gt;Pero맘ue맔e guste no significa que piense que sea lo mejor cuando맏ablo de un contexto profesional. El desarrollo de software no es 칰nicamente mi profesi칩n, es mi afici칩n. Por eso맚odas estas cosas que me gustan, las hago principalmente cuando tengo libre y, cuando estoy trabajando, decido lo que hacer buscando el criterio que m치s le convenga al proyecto.&lt;/p&gt;

&lt;p&gt;Actualmente llevo algo m치s de un a침o trabajando en un proyecto en el que hacemos mucho pair programming, as칤 que no puedo decir que sea un veterano en esto, pero creo que ha pasado un tiempo lo suficientemente grande como para tener una opini칩n desde la experiencia.&lt;/p&gt;

&lt;h1 id=&#34;lo-bueno&#34;&gt;Lo bueno&lt;/h1&gt;

&lt;p&gt;Para mi los aspectos positivos m치s interesantes de esta pr치ctica son:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Beneficia a la &lt;strong&gt;propiedad colectiva del c칩digo&lt;/strong&gt;.-Esto facilita la eliminaci칩n del efecto &amp;#8220;es que eso lo hizo fulanito y s칩lo 칠l puede meterle mano&amp;#8221;. Si adem치s de pair programming, introducimos rotaci칩n dentro de los equipos, el beneficio es a칰n mayor.&lt;/li&gt;
&lt;li&gt;El &lt;strong&gt;c칩digo es mejor&lt;/strong&gt;.- Nada como 4 ojos pendientes del c칩digo que se est치 generando. Como m칤nimo, permitir치 garantizar맘ue al menos que ha existido consenso entre dos맋e cara a la legibilidad, dise침o y estructura del c칩digo.&lt;/li&gt;
&lt;li&gt;Las &lt;strong&gt;pruebas&lt;/strong&gt; son &lt;strong&gt;mejores&lt;/strong&gt;.- Me cuesta recordar맛na sesi칩n de pair programming en la que, fruto del di치logo entre ambas partes, no haya surgido alg칰n test de triangulaci칩n para probar un caso l칤mite.&lt;/li&gt;
&lt;li&gt;Promueve맓a definici칩n y utilizaci칩n del &lt;strong&gt;lenguaje ub칤cuo&lt;/strong&gt;.- Cuando programas solo prestas menos atenci칩n a los nombres y, aunque se la prestes, careces de una figura muy importante de cara a encontrar el nombre m치s adecuado, el debate.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;lo-malo&#34;&gt;Lo malo&lt;/h1&gt;

&lt;p&gt;Como todo, tambi칠n tiene algunos aspectos negativos, para mi estos son los principales:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Es &lt;strong&gt;dif칤cil&lt;/strong&gt;맗racticarlo correctamente.- Quien piense que el pair programming se limita a que dos t칤os se sienten al lado y se intercambien el teclado, va muy desorientado. Al final pondr칠 algunos enlaces con consejos al respecto.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Fatiga&lt;/strong&gt;.- Si, 4 horas de pairing cansan mucho. Y m치s si no se practica bien. Un truco, es importante respetar los descansos o el cerebro termina frito.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;cu치ndo&#34;&gt;쮺u치ndo?&lt;/h1&gt;

&lt;p&gt;Dicho esto, tampoco creo que deba hacerse el 100% del tiempo. Creo que esta pr치ctica aporta mucho valor cuando estamos hablando de escribir c칩digo de negocio y맔ucho menos cuando hablamos de UI e infraestructura. Cuando맏ablamos de dominios que estamos explorando y es evidente que el cuello de botella no va a ser el ritmo al que escribamos맊칩digo, es precisamente uno de los escenarios en los que m치s beneficios nos va a proporcionar esta pr치ctica.&lt;/p&gt;

&lt;p&gt;Normalmente no맔e parece pr치ctico recurrir al pair programming para escribir맊칩digo de말nfraestructura o c칩digo de una vista. A no ser que estemos haciendo맔entoring, pero eso ser칤a otro tema.&lt;/p&gt;

&lt;p&gt;Por supuesto, siempre hay excepciones y ya sabemos que la respuesta casi siempre만s &amp;#8220;depende&amp;#8221;.&lt;/p&gt;

&lt;h1 id=&#34;m치s-informaci칩n&#34;&gt;M치s informaci칩n&lt;/h1&gt;

&lt;p&gt;Sobre el tema hay mucho escrito,맗ero tengo recientes en mi cabeza estos dos posts que a su vez enlazan a otro mont칩n de ellos:&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://juandavidvega.es/blog/?p=194&#34; target=&#34;_blank&#34;&gt;Pair programming: Mi gu칤a pr치ctica&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.carlosble.com/2015/07/productive-pair-programming/&#34; target=&#34;_blank&#34;&gt;Productive Pair Programming&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Nuestra programaci칩n es mala para el desarrollo de software</title>
      <link>http://www.modestosanjuan.com/nuestra-programacion-es-mala-para-el-desarrollo-de-software/</link>
      <pubDate>Mon, 28 Dec 2015 22:22:29 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/nuestra-programacion-es-mala-para-el-desarrollo-de-software/</guid>
      <description>

&lt;h1 id=&#34;la-programaci칩n-de-mi-color-favorito&#34;&gt;La programaci칩n de mi color favorito&lt;/h1&gt;

&lt;p&gt;El otro d칤a mi hija me pregunt칩 cu치l era mi color favorito. Respond칤 inmediatamente sin pensarlo: &amp;#8220;el azul&amp;#8221;. No era la primera vez que me lo preguntaban y es un dato que tengo claro desde que era ni침o. O no.&lt;/p&gt;

&lt;p&gt;En esta ocasi칩n, no se exactamente porqu칠, despu칠s de responder a mi hija algo en mi cabeza empez칩 a retorcerse: &amp;#8220;쯘s el azul mi color favorito?&amp;#8221;. De repente me vi cuestionando algo que estaba grabado a fuego en mi cerebro desde hace tanto tiempo que no soy capaz de recordar cuando decid칤 que el azul era mi color favorito.&lt;/p&gt;

&lt;p&gt;Si me paro a pensar detenidamente, en mi caso esta respuesta est치 completamente programada desde mi infancia y ha perdurado hasta hace unos d칤as como una verdad absoluta e incuestionable. Pero si lo analizo, cada vez que tengo que tomar una decisi칩n que implique decantarme por un color, el azul nunca es mi elecci칩n. Seguro que en alg칰n momento de mi infancia el azul era mi color favorito y este dato se hizo hueco en mi cerebro, acomod치ndose de tal modo que no hab칤a vuelto a cuestionarme su vigencia hasta ahora.&lt;/p&gt;

&lt;p&gt;Alguno podr칤a estarse preguntando ahora mismo: &amp;#8220;쯫 qu칠 carajo tiene esto que ver con el desarrollo del software?&amp;#8221;&lt;/p&gt;

&lt;p&gt;Personalmente creo que tiene mucho que ver, porque es algo que me encuentro constantemente cuando trabajo con equipos de desarrollo. Cada cierto tiempo me enfrento a &amp;#8220;programaciones&amp;#8221; de este tipo que, en lugar de estar relacionadas con el color favorito o el equipo de f칰tbol preferidos, est치n relacionadas con el uso de una tecnolog칤a, la aplicaci칩n de un patr칩n o la preferencia a la hora de aplicar una determinada pr치ctica en detrimento de otra.&lt;/p&gt;

&lt;h1 id=&#34;los-principios-sobre-las-pr치cticas&#34;&gt;Los principios sobre las pr치cticas&lt;/h1&gt;

&lt;p&gt;Es frecuente que, despu칠s de que un equipo de desarrollo tome una decisi칩n, se olviden las razones que llevaron la toma de esa decisi칩n. Es m치s, es frecuente que esa decisi칩n se convierta en una verdad inamovible e incuestionable hasta tal punto que, aunque las razones que originaron esa decisi칩n sean modificadas, da igual, nadie se plantea si la decisi칩n debe replantearse o no.&lt;/p&gt;

&lt;p&gt;Es importante poder recurrir siempre a los principios que originan la decisi칩n de aplicar las pr치cticas. Cuando el debate gira entorno a la pr치ctica, olvidando el principio, estamos perdidos. Es como debatir sobre una soluci칩n sin recordar el problema. Cuando esto sucede, lo habitual termina siendo un debate en el que se pierde completamente el foco y terminamos en una espiral en la que lo que debatimos es c칩mo solucionar el nuevo problema que ha generado la soluci칩n propuesta, en lugar de pensar si es posible buscar una soluci칩n alternativa al problema original sin que ello conlleve una reacci칩n en cadena de problemas.&lt;/p&gt;

&lt;h1 id=&#34;localiza-bien-el-problema&#34;&gt;Localiza bien el problema&lt;/h1&gt;

&lt;p&gt;Cuando llega el momento de enfrentarse a un problema, funciona muy bien dedicar unos minutos a poner por escrito cu치l es exactamente el problema que queremos resolver. Una vez hecho esto, mi recomendaci칩n dedicar unos minutos m치s a pensar si ese es realmente es el problema a resolver o en realidad estamos condicionados por un problema generado por la soluci칩n actual. Una vez que hemos salido de la espiral de los problemas generados por las soluciones, estaremos en verdadera disposici칩n de debatir sobre el problema.&lt;/p&gt;

&lt;p&gt;En ocasiones tendremos que adoptar soluciones a problemas grandes que generan problemas peque침os y nos veremos obligados a trabajar sobre esas bases, pero lo m치s importante es no olvidar nunca los principios o perderemos la capacidad de cuestionar dichas soluciones porque la respuesta siempre ser치: &amp;#8220;no se, se decidi칩 as칤 y as칤 lo hemos hecho desde entonces. Mejor no tocarlo por si acaso&amp;#8221;.&lt;/p&gt;

&lt;h1 id=&#34;no-s칩lo-a-nivel-de-c칩digo&#34;&gt;No s칩lo a nivel de c칩digo&lt;/h1&gt;

&lt;p&gt;Este tipo de problemas nos los encontramos constantemente en otras facetas del desarrollo de software. Es com칰n terminar con procesos de despliegue enrevesados, en los que mitigamos el dolor complicando el proceso con soluciones que a la larga generan m치s focos de dolor y que nos sumergen en la espiral de la que ya he hablado. Esto es frecuente cuando llega el momento de plantear despliegues autom치ticos de sistemas complejos o en el desarrollo de los propios procesos de negocio.&lt;/p&gt;

&lt;h1 id=&#34;cuidado-con-el-diagn칩stico&#34;&gt;Cuidado con el diagn칩stico&lt;/h1&gt;

&lt;p&gt;Otro de los problemas comunes es criticar el principio despu칠s de tener una experiencia traum치tica aplicando la pr치ctica. Otro es justo el contrario, estigmatizar la pr치ctica cuando el error fue tratar de aplicarla sobre un problema para el que no era adecuada. Algunos ejemplos podr칤an ser:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Enfocar de forma err칩nea un entorno de integraci칩n continua y que la conclusi칩n sea que la integraci칩n continua no funciona.&lt;/li&gt;
&lt;li&gt;Invertir la &lt;a href=&#34;http://martinfowler.com/bliki/TestPyramid.html&#34; target=&#34;_blank&#34;&gt;pir치mide de test&lt;/a&gt; y llegar a un punto en el que los tests son muy fr치giles y caros de mantener, pero concluir que hacer tests autom치ticos no merece la pena.&lt;/li&gt;
&lt;li&gt;Decidir utilizar una base de datos no relacional para solucionar un problema m치s adecuado para una relacional y descartar el uso de base de datos no relacionales para cualquier cosa.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&#34;no-nos-olvidemos-de-entregar-software&#34;&gt;No nos olvidemos de entregar software&lt;/h1&gt;

&lt;p&gt;La realidad de todo proyecto es que siempre hay algo que se puede hacer mejor. Siempre hay un proceso que se puede optimizar, los tests pueden ser m치s completos y legibles, el c칩digo se puede refactorizar o se puede buscar otro enfoque. Pero no hay que volverse loco, no hay que olvidar que desarrollamos software con una finalidad y, si no lo entregamos, los usuarios no lo podr치n utilizar. Desarrollar software y no entregarlo es lo mismo que no desarrollar software.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>La importancia del rojo en TDD</title>
      <link>http://www.modestosanjuan.com/la-importancia-del-rojo-en-tdd/</link>
      <pubDate>Tue, 22 Dec 2015 14:14:43 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/la-importancia-del-rojo-en-tdd/</guid>
      <description>&lt;p&gt;A un desarrollador맘ue practiqueTDD,만l flujo &lt;strong&gt;rojo, verde, refactor&lt;/strong&gt; no le resulta extra침o. En este post맘uieroromper una lanza a favor del &lt;strong&gt;rojo&lt;/strong&gt;,만se gran incomprendido. Para ilustrarlo voy a recurrir a un ejemplo muy sencillo:&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true&#34;&gt;[TestMethod]
public void sample_test()
{
    var messagingService = GivenAMessagingServiceStub();
    var unreadMessages = messagingService.UnreadMessages();
    unreadMessages.Count.Should().Be(1)
}&lt;/pre&gt;

&lt;p&gt;Este ejemplo esta simplificado, pero me permite mostrar맛n test con una estructura de tipo &lt;strong&gt;given/when/then o AAA&lt;/strong&gt;(seg칰n gustos). Con el objetivo de obtener ese primer rojo, me encuentro a veces con esto:&lt;/p&gt;

&lt;pre class=&#34;lang:default decode:true&#34;&gt;public IEnumerable&amp;lt;Message&amp;gt; UnreadMessages()
{
    throw new NotImplementedException();
}&lt;/pre&gt;

&lt;p&gt;Creo que hacer esto desvirt칰a el objetivo de buscar el rojo. Uno de los objetivos de buscar el primer rojo es verificar el test, pero es imposible verificar el test si no se llega a ejecutar completo. Es cierto que al lanzar el test va a dar un rojo, pero ese rojo es equivalente a haber lanzado la excepci칩n만n lugar de la llamada al c칩digo de producci칩n, as칤 que de poco vale.Otras veces se llega un poco m치s en la b칰squeda del rojo con un c칩digo similar a este:&lt;/p&gt;

&lt;pre class=&#34;lang:default decode:true&#34;&gt;public IEnumerable&amp;lt;Message&amp;gt; UnreadMessages()
{
    return null;
}&lt;/pre&gt;

&lt;p&gt;En este caso es cierto que el test falla en la l칤nea del &lt;strong&gt;then&lt;/strong&gt;, pero personalmente sigue sin convencerme porque en realidad el rojo no se produce a causa del assert. La raz칩n es sencilla y se ilustra bastante bien diseccionando el test de esta forma:&lt;/p&gt;

&lt;pre class=&#34;lang:default decode:true&#34;&gt;[TestMethod]
public void sample_test()
{
    var messagingService = GivenAMessagingServiceStub();
    var unreadMessages = messagingService.UnreadMessages();
    var count = unreadMessages.Count;
    count.Should().Be(1)
}&lt;/pre&gt;

&lt;p&gt;Con este ejemplo se puede ver claramente que el rojo no da debido al assert, da debido a una &lt;strong&gt;NullPointerException&lt;/strong&gt; en la asignaci칩n de la variable &lt;strong&gt;count&lt;/strong&gt;, lo que sigue alejado del objetivo de probar primero el test. En este caso, no cuesta mucho buscar un rojo que adem치s permita probar el test completo:&lt;/p&gt;

&lt;pre class=&#34;lang:default decode:true &#34;&gt;public IEnumerable&amp;lt;Message&amp;gt; UnreadMessages()
{
    return new List&amp;lt;Message&amp;gt;();
}&lt;/pre&gt;

&lt;p&gt;Por supuesto,만s importante no olvidar que el primer paso맕unca es el rojo, es pensar.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>[PowerShell] Pasar de SecureString a String</title>
      <link>http://www.modestosanjuan.com/powershell-pasar-de-securestring-a-string/</link>
      <pubDate>Wed, 25 Nov 2015 09:16:48 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/powershell-pasar-de-securestring-a-string/</guid>
      <description>&lt;p&gt;En ocasiones necesito usar맛n &lt;strong&gt;SecureString&lt;/strong&gt;맗ero luego me veo obligado a utilizar만se string de forma no segura.ㅁunque맓a recomendaci칩n es no hacer esto, la realidad es que hay muchos escenarios en los que es necesario. Un ejemplo sencillo es el caso en el que necesito맘ue el usuario meta un dato sensible por consola y맗ero luego necesito utilizar ese dato맊omo texto plano para pasarlo como par치metro a un ejecutable de Windows. Este es un ejemplo de c칩mo hacerlo:&lt;/p&gt;

&lt;pre class=&#34;lang:ps decode:true&#34;&gt;Param(
   [Parameter(Mandatory=$True)]
   [SecureString]$password
)

function Decrypt-SecureString($secureString) {
    $BSTR = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR($password)
    return [System.Runtime.InteropServices.Marshal]::PtrToStringAuto($BSTR)
}

$nonSecure = Decrypt-SecureString $password&lt;/pre&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Value Providers y Parameter Binding en ASP.NET Web API</title>
      <link>http://www.modestosanjuan.com/value-providers-y-parameter-binding-en-asp-net-web-api/</link>
      <pubDate>Fri, 13 Nov 2015 10:02:22 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/value-providers-y-parameter-binding-en-asp-net-web-api/</guid>
      <description>&lt;p&gt;Cuando맕ecesito acceder a informaci칩n de la &lt;strong&gt;Request&lt;/strong&gt;맋esde una acci칩n de un controlador en ASP.NET Web API, la primera tentaci칩n es acceder directamente al objeto request y buscar lo que necesito. El맗rincipal problema de hacer esto es que convierte en un infierno hacer cualquier tipo de prueba automatizada para esta acci칩n. Por ejemplo:&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true&#34;&gt;[HttpGet] 
[Route(&#34;doAnything&#34;)] 
public IHttpActionResult Get() 
{ 
    var referrer = request.Headers.Referrer
    var resul = .....
    // DO ANY STUFF WITH THE REFERRER    
    return result; 
}&lt;/pre&gt;

&lt;p&gt;El mecanismo m치s sencillo que se me ocurre para hacer que esta acci칩n sea f치cil de probar es hacer que el dato que necesito de la request, le llegue como par치metro a la acci칩n:&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true&#34;&gt;public IHttpActionResult Get(string referrer) 
&lt;/pre&gt;

&lt;p&gt;Con esta modificaci칩n puedo programar sin problemas un test para esta acci칩n y me quedo tan ancho. Pero claro, 쯤u칠 pasa cuando ejecuto el c칩digo en Web API? Evidentemente falla. En este punto es donde Web API me echa un cable y me permite맏acer algo como esto:&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true&#34;&gt;public IHttpActionResult Get([ValueProvider(typeof(ReferrerValueProviderFactory))]string referrer) 
&lt;/pre&gt;

&lt;p&gt;Gracias a los&lt;strong&gt;Value Providers&lt;/strong&gt;Web aPI puede inyectar en el par치metro el valor que necesito. El c칩digo ser칤a este:&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true&#34;&gt;public class RefererValueProviderFactory : ValueProviderFactory {
    public override IValueProvider GetValueProvider(HttpActionContext actionContext) {
        return new RefererValueProvider(actionContext.Request.Headers);
    }
}

public class RefererValueProvider : IValueProvider {
    private readonly HttpRequestHeaders headers;

    public RefererValueProvider(HttpRequestHeaders headers) {
        this.headers = headers;
    }

    public bool ContainsPrefix(string prefix) {
        return true;
    }

    public ValueProviderResult GetValue(string key) {
        return new ValueProviderResult(headers.Referrer, headers.Referrer.ToString(), CultureInfo.InvariantCulture);
    }
}&lt;/pre&gt;

&lt;p&gt;El c칩digo est치 simplificado para el ejemplo, pero es necesario aplicar control de errores. Por ejemplo, es posible que la cabecera sea nula, lo que lanzar칤a una excepci칩n al intentar hacer el&lt;strong&gt;ToString()&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Para que lo que llevo de ejemplo funcione faltar칤a 칰nicamente registrar el nuevo value provider먝만n el &lt;strong&gt;Register&lt;/strong&gt; de &lt;strong&gt;WebApiConfig&lt;/strong&gt;:&lt;/p&gt;

&lt;pre class=&#34;lang:default decode:true&#34;&gt;public static void Register(HttpConfiguration config)
{
    config.Services.Add(typeof(ValueProviderFactory), new ReferrerValueProviderFactory());

    ...&lt;/pre&gt;

&lt;p&gt;El problema que le veo hasta este punto es que el uso de el atributo [ValueProvide]맋ificulta la lectura y tener que registrarlo a침ade un poco de complejidad al setup y algo de lo que me tendr칤a que acordar en el pr칩ximo proyecto. Teniendo en cuenta c칩mo se hacen las cosas en Web API, preferir칤a tener algo como esto:&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true&#34;&gt;public IHttpActionResult Get([FromReferrerHeader]string referrer)&lt;/pre&gt;

&lt;p&gt;Algo como esto resulta mucho m치s legible y alineado con lo que ya estoy acostumbrado cuando recurro a atributos como &lt;strong&gt;[FromBody]&lt;/strong&gt; o &lt;strong&gt;[FromUri]&lt;/strong&gt;. Aqu칤 es donde Web API me말nvita a utilizar&lt;strong&gt;Parameter Binding&lt;/strong&gt;. B치sicamente lo que voy마 hacer es crear un atributo que herede de&lt;strong&gt;HttpParameterBinding&lt;/strong&gt; y a utilizar el ValueProvider que he creado justo antes맗ara obtener este dato:&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true &#34;&gt;public class FromReferrerHeaderAttribute : ParameterBindingAttribute {
    public override HttpParameterBinding GetBinding(HttpParameterDescriptor parameter) {
        var httpConfig = parameter.Configuration;
        var binder = new ModelBinderAttribute()
            .GetModelBinder(httpConfig, parameter.ParameterType);
        return new ModelBinderParameterBinding(
            parameter, binder,
            new ValueProviderFactory[] { new ReferrerValueProviderFactory() });
    }
} 
&lt;/pre&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;p&gt;Adem치s, al utilizar parameter binding, ya no es necesario registrar el value provider, lo que simplifica su uso.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Bus de eventos usando Reactive Extensions</title>
      <link>http://www.modestosanjuan.com/bus-de-eventos-usando-reactive-extensions/</link>
      <pubDate>Tue, 10 Nov 2015 09:32:59 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/bus-de-eventos-usando-reactive-extensions/</guid>
      <description>&lt;p&gt;Utilizar un bus de eventos dentro de una aplicaci칩n es algo막astante com칰n.Un ejemplo muy sencillo podr칤a ser desacoplar la l칩gica de env칤o de notificaciones al usuario en WPF desde los ViewModels sin necesidad de recurrir a la inyecci칩n de dependencias en el ViewModel.ㅁunque hasta ahora hab칤a recurrido siempre a programar mi propio bus de eventos, utilizar &lt;a href=&#34;https://github.com/Reactive-Extensions/Rx.NET&#34; target=&#34;_blank&#34;&gt;Reactive Extensions&lt;/a&gt; me ha resultado muy interesante,먞죲il y sencillo. Este ser칤a un ejemplo de bus de eventos utilizando RX:&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true&#34;&gt;public static class ReactiveEventBus {
    private static readonly Subject&amp;lt;object&amp;gt; messageSubject = new Subject&amp;lt;object&amp;gt;();

    public static void Send&amp;lt;T&amp;gt;(T message) {
        messageSubject.OnNext(message);
    }

    public static IObservable&amp;lt;T&amp;gt; AsObservable&amp;lt;T&amp;gt;() { return messageSubject.OfType&amp;lt;T&amp;gt;(); }
}&lt;/pre&gt;

&lt;p&gt;Este c칩digo lo encontr칠&lt;a href=&#34;http://rogeralsing.com/2010/01/23/rx-framework-building-a-message-bus/&#34; target=&#34;_blank&#34;&gt;aqu칤&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Lo habitual en un bus de eventos es tener un mecanismo para enviar eventos y otro para suscribirnos a ellos. En este caso, en lugar de맏abilitar la suscripci칩n, lo que me proporciona es la posibilidad de obtener un &lt;strong&gt;IObservable&lt;T&gt;&lt;/strong&gt;, siendo &lt;strong&gt;T&lt;/strong&gt; el tipo del mensaje que quiero observar.&lt;/p&gt;

&lt;p&gt;Aplicado al ejemplo de las notificaciones, en la MainWindow (o donde sea) podr칤a a침adir este c칩digo:&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true&#34;&gt;var subscription = ReactiveEventBus.AsObservable&amp;lt;GlobalMessage&amp;gt;().Subscribe(message =&amp;gt; MessageBox.Show(message.Message));
Closed += (sender, args) =&amp;gt; subscription.Dispose();
&lt;/pre&gt;

&lt;p&gt;Y eso me permitir칤a poder enviar mensajes desde cualquierViewModel (o cualquier otro sitio) con este c칩digo:&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true&#34;&gt;ReactiveEventBus.Send(new GlobalMessage(&#34;Hola!&#34;));
&lt;/pre&gt;

&lt;p&gt;Es muy importante맚ener en cuenta la llamada al &lt;strong&gt;Dispose()&lt;/strong&gt; de la suscripci칩n para evitar problemas de liberaci칩n de recursos.&lt;/p&gt;

&lt;p&gt;Lo interesante de que el bus de eventos me de un &lt;strong&gt;IObservable&lt;T&gt;&lt;/strong&gt; es que, combinado con RX puedo hacer cosas m치s complejas de una forma muy sencilla, como:&lt;/p&gt;

&lt;pre class=&#34;lang:c# decode:true &#34;&gt;ReactiveEventBus.AsObservable&amp;lt;ScopedEvent&amp;gt;()
    .Where(evt =&amp;gt; evt.Scope == &#34;Scope1&#34;)
    .Subscribe(evt =&amp;gt; PUT YOUR CODE FOR Scope1 HERE);

ReactiveEventBus.AsObservable&amp;lt;ScopedEvent&amp;gt;()
    .Where(evt =&amp;gt; evt.Scope == &#34;Scope2&#34;)
    .Subscribe(evt =&amp;gt; PUT YOUR CODE FOR Scope2 HERE);
&lt;/pre&gt;

&lt;p&gt;Respecto a si tiene sentido el uso de una propiedad para determinar el scope o ser칤a m치s adecuado utilizar un objeto de distinto tipo, la respuesta es la de siempre: &lt;strong&gt;depende&lt;/strong&gt;멇릦&lt;/p&gt;

&lt;p&gt;Algunos casos만n los que me parece interesante son el env칤o맛n evento destinado 칰nicamente a los UserControl que est치n mostrando una entidad concreta en un interfaz MDI o hacer que el scope de un evento sea una ventana concreta.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>[PowerShell] Sacando partido a la conversi칩n de tipos</title>
      <link>http://www.modestosanjuan.com/powershell-sacando-partido-a-la-conversion-de-tipos/</link>
      <pubDate>Thu, 22 Oct 2015 00:27:51 +0000</pubDate>
      
      <guid>http://www.modestosanjuan.com/powershell-sacando-partido-a-la-conversion-de-tipos/</guid>
      <description>&lt;p&gt;PowerShell ETS (Extended Type System) forma parte de las tripas de PowerShell y es la parte맘ue permite que convivan tipos de .Net, COM, ADSI y WMI pero que a nosotros se nos muestren como objetos de PowerShell de primer orden.&lt;/p&gt;

&lt;p&gt;ETS tiene mucha potencia y no siempre es f치cil obtener documentaci칩n sobre c칩mo hacer las cosas, pero en este post quiero dejarle a mi yo futuro un regalito para cuando necesite realizar conversi칩n de tipos de .Net en PowerShell.&lt;/p&gt;

&lt;p&gt;El ejemplo es muy sencillo y me ha surgido en un contexto real y para explicarlo lo voy a simplificar todo lo que pueda. Imaginemos que tenemos un tipo personalizado tal que este:&lt;/p&gt;

&lt;pre class=&#34;lang:ps decode:true&#34;&gt;Add-Type -TypeDefinition @
using System;
using System.Collections;
 
namespace Configuration
{
    public class ConfigFolder {
        public ConfigFolder() {}
        
        public ConfigFolder(string path) {
            Path = path;
        }

        public string Path { get; set; }

        public override string ToString() {
            return Path;
        }
    }
}
@
&lt;/pre&gt;

&lt;p&gt;Al sobreescribir el m칠todo &lt;strong&gt;ToString()&lt;/strong&gt; del tipo, esto nos permite hacer cosas como esta:&lt;/p&gt;

&lt;pre class=&#34;lang:ps decode:true&#34;&gt;Function Write-AsString($folder) {
    &#34;as string we get: {0}&#34; -f $folder
}

$configFolder = New-Object Configuration.ConfigFolder
$configFolder.Path = &#34;c:\anyPath\&#34;

Write-AsString $configFolder
&lt;/pre&gt;

&lt;p&gt;Como la funci칩n &lt;strong&gt;Write-AsString&lt;/strong&gt; no especifica el tipo para &lt;strong&gt;$folder&lt;/strong&gt;, al llamar a la funci칩n con el par치metro de tipo&lt;strong&gt;ConfigFolder&lt;/strong&gt;, se est치 llamando al m칠todo&lt;strong&gt;ToString()&lt;/strong&gt; para convertir el valor autom치ticamente. El tema es que si queremos sacarle un poco m치s de partido y especificar un tipo que no sea string a&lt;strong&gt;$folder&lt;/strong&gt;, lo que obtendremos ser치 un error. Por ejemplo:&lt;/p&gt;

&lt;pre class=&#34;lang:ps decode:true&#34;&gt;Function Write-FullName([System.IO.DirectoryInfo]$folder) {
    &#34;BaseName is: {0}&#34; -f $folder.BaseName
}

$configFolder = New-Object Configuration.ConfigFolder
$configFolder.Path = &#34;c:\anyPath\&#34;

Write-FullName $configFolder
&lt;/pre&gt;

&lt;p&gt;Al ejecutar este c칩digo nos dar치 un error de conversi칩n de tipos porque PowerShell no tiene ni la menor idea de c칩mo convertir un ConfigFolder en unSystem.IO.DirectoryInfo. Aqu칤 es donde ETS viene al rescate. ㅁdem치s de a침adir el tipo ConfigFolder, es necesario a침adir un tipo que realice la conversi칩n마utom치ticamente:&lt;/p&gt;

&lt;pre class=&#34;lang:ps decode:true &#34;&gt;Add-Type -TypeDefinition @
using System;
using System.Collections;
using System.Management.Automation;
 
namespace Configuration
{
    public class ConfigFolderConverter : PSTypeConverter {
        public override bool CanConvertFrom(Object sourceValue, Type destinationType)
        {
            string src = sourceValue as string;
            if (src != null) {
                return true;
            }
            return false;
        }
 
        public override object ConvertFrom(object sourceValue, Type destinationType, IFormatProvider provider, bool IgnoreCase) {
            if (sourceValue == null) { throw new InvalidCastException(&#34;no conversion possible&#34;); }
            if (this.CanConvertFrom(sourceValue, destinationType)) {
                try {
                    string src = sourceValue as string;
                    return new Aida.ConfigFolder(src);
                }
                catch (Exception) { throw new InvalidCastException(&#34;no conversion possible&#34;); }
            }
            throw new InvalidCastException(&#34;no conversion possible&#34;);
        }
        public override bool CanConvertTo(object value, Type destinationType) { 
            if((destinationType == typeof(System.IO.DirectoryInfo)) &amp;&amp; (value.GetType() == typeof(Configuration.ConfigFolder))) {
                return true;
            }
            return false; 
        }
        public override object ConvertTo(object value, Type destinationType, IFormatProvider provider, bool IgnoreCase) {
            if (CanConvertTo(value, destinationType)) {
                return new System.IO.DirectoryInfo((value as Configuration.ConfigFolder).Path);
            }
            throw new InvalidCastException(&#34;no conversion possible&#34;);
        }
    }
}
@&lt;/pre&gt;

&lt;p&gt;Por supuesto, este tipo es un ejemplo y podr칤a dejarse un c칩digo mucho m치s limpio, pero cualquiera que sepa lo que es experimentar con el &lt;strong&gt;Add-Type&lt;/strong&gt; de PowerShell entender치 que porqu칠 prefiero no dedicarle mucho tiempo a limpiarlo y a irlo probando ;).&lt;/p&gt;

&lt;p&gt;Despu칠s de a침adir este tipo, es necesario decirle a PowerShell que lo tiene que usar. Para esto es necesario crear un archivo (por ejemplo: ConfigFolder.Converter.ps1xml) que ser칤a as칤:&lt;/p&gt;

&lt;pre class=&#34;lang:xhtml decode:true &#34;&gt;&amp;lt;Types&amp;gt;
  &amp;lt;Type&amp;gt;
    &amp;lt;Name&amp;gt;Configuration.ConfigFolder&amp;lt;/Name&amp;gt;
    &amp;lt;TypeConverter&amp;gt;
      &amp;lt;TypeName&amp;gt;Configuration.ConfigFolderConverter&amp;lt;/TypeName&amp;gt;
    &amp;lt;/TypeConverter&amp;gt;
  &amp;lt;/Type&amp;gt;
&amp;lt;/Types&amp;gt;&lt;/pre&gt;

&lt;p&gt;Y luego ejecutar el comando:&lt;/p&gt;

&lt;pre class=&#34;lang:ps decode:true&#34;&gt;Update-TypeData .\ConfigFolder.Converter.ps1xml&lt;/pre&gt;

&lt;p&gt;Una vez hecho esto, el ejemplo que antes fallaba ahora funcionar치 perfectamente, permitiendo conversiones autom치ticas del tipo&lt;strong&gt;ConfigFolder&lt;/strong&gt; a&lt;strong&gt;System.IO.DirectoryInfo&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Esto es s칩lo un ejemplo de lo que PowerShell ETS tiene para ofrecernos. Adem치s de custom converters, tambi칠n permite extender clases existentes, a침adir alias y algunas cosillas curiosas.&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>